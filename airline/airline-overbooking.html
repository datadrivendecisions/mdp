<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ritsaart Bergsma, Jeroen Landman &amp; Witek ten Hove">

<title>Assignment 1 - Airline overbooking</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="airline-overbooking_files/libs/clipboard/clipboard.min.js"></script>
<script src="airline-overbooking_files/libs/quarto-html/quarto.js"></script>
<script src="airline-overbooking_files/libs/quarto-html/popper.min.js"></script>
<script src="airline-overbooking_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="airline-overbooking_files/libs/quarto-html/anchor.min.js"></script>
<link href="airline-overbooking_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="airline-overbooking_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="airline-overbooking_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="airline-overbooking_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="airline-overbooking_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.32.0.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Assignment 1 - Airline overbooking</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ritsaart Bergsma, Jeroen Landman &amp; Witek ten Hove </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="homework-assigmment-1.6-p.11-from-lecture-notes" class="level2">
<h2 class="anchored" data-anchor-id="homework-assigmment-1.6-p.11-from-lecture-notes">Homework Assigmment 1.6 p.11 from Lecture notes</h2>
<p>An airline seeks a reservation policy for a flight with <span class="math inline">\(S\)</span> seats that maximizes its expected profit from the flight. Reservation requests arrive hourly according to a Bernoulli process with <span class="math inline">\(p\)</span> being the probability of a reservation request per hour (at most one reservation request will arrive per hour). A passenger with a booked reservation pays the fare <span class="math inline">\(f &gt; 0\)</span> at flight time. If <span class="math inline">\(b \geq 0\)</span> passengers with booked reservations are denied boarding at flight time, they do not pay the fare, and the airline pays them a penalty <span class="math inline">\(c(b)\)</span> (divided among them) where <span class="math inline">\(b \mapsto c(b)\)</span> is increasing with <span class="math inline">\(c(0) = 0\)</span>.</p>
<p>Consider the <span class="math inline">\(n\)</span>-th hour before flight time <span class="math inline">\(T\)</span>. At the beginning of the hour, the airline reviews the number of booked reservations on hand, <span class="math inline">\(r\)</span> say, and decides whether to book (accept) or decline a reservation request arriving during the next hour. Each of the <span class="math inline">\(r\)</span> booked reservations may cancel during the hour, independently of each other, with probability <span class="math inline">\(q\)</span>.</p>
<p>For this reason, the airline is considering the possibility of overbooking the flight to compensate for cancellations. Let <span class="math inline">\(V^*_n(r)\)</span> be the maximum expected future profit when there are <span class="math inline">\(r\)</span> booked reservations at the beginning of the hour, before the accept/decline decision has been taken, and reservation requests and cancellations during the hour have occurred. Let <span class="math inline">\(W^*_n(r)\)</span> be the maximum expected future profit when there are <span class="math inline">\(r\)</span> booked reservations after booking or declining a reservation request, but before cancellations. The aim is to determine an optimal reservation policy for any value of the number of booked reservations at the beginning of each hour till the flight time <span class="math inline">\(T\)</span>.</p>
<section id="a-markov-decision-model" class="level3">
<h3 class="anchored" data-anchor-id="a-markov-decision-model">a) Markov Decision Model</h3>
<p>Formulate the problem as a Markov decision model, by determining the state space, action spaces, rewards, terminal rewards, and the transition probabilities. Formulate the optimality equation from which an optimal reservation policy can be determined.</p>
</section>
<section id="b-optimality-of-booking-limit-policies" class="level3">
<h3 class="anchored" data-anchor-id="b-optimality-of-booking-limit-policies">b) Optimality of Booking-Limit Policies</h3>
<p>Assume, as can be shown, that if <span class="math inline">\(g\)</span> is a quasiconcave function on the integers, then <span class="math inline">\(r \mapsto \mathbb{E}(g(B_r))\)</span> is quasiconcave, where <span class="math inline">\(B_r\)</span> is a sum of independent identically distributed Bernoulli random variables. We recall that <span class="math inline">\(g\)</span> is quasiconcave on the (positive) integers when there exists a number <span class="math inline">\(a\)</span> such that <span class="math inline">\(g\)</span> is increasing on <span class="math inline">\([0, a]\)</span> and decreasing on <span class="math inline">\([a, \infty]\)</span>.</p>
<p>Use this result to show the following facts. First, show that <span class="math inline">\(r \mapsto W^*_n(r)\)</span> is quasiconcave.</p>
<p>Let <span class="math inline">\(b_n = \arg\max_r W^*_n(r)\)</span>. Call <span class="math inline">\(b_n\)</span> the booking limit. Then show that <span class="math inline">\(r \mapsto V^*_n(r)\)</span> is quasiconcave with maximum <span class="math inline">\(b_n\)</span>. Finally, show that it is optimal to accept a reservation if and only if <span class="math inline">\(r &lt; b_n\)</span>, with <span class="math inline">\(r\)</span> the number of booked reservations on hand at the beginning of the hour (before a decision has been taken).</p>
</section>
<section id="c-solving-the-problem" class="level3">
<h3 class="anchored" data-anchor-id="c-solving-the-problem">c) Solving the Problem</h3>
<p>Solve the problem when the parameters are as follows:</p>
<ul>
<li><span class="math inline">\(T = 30\)</span></li>
<li><span class="math inline">\(c(b) = f \cdot b\)</span></li>
<li><span class="math inline">\(S = 10\)</span></li>
<li><span class="math inline">\(f =\)</span> € <span class="math inline">\(300\)</span></li>
<li><span class="math inline">\(p = 0.2\)</span> and <span class="math inline">\(0.3\)</span></li>
<li><span class="math inline">\(q = 0.05\)</span> and <span class="math inline">\(0.10\)</span></li>
<li><span class="math inline">\(r \leq 20\)</span> (so there is an upper bound on the total number of reservations).</li>
</ul>
<p>Make graphs of the different combinations. In each case, estimate the booking limit ten hours before flight time from your graphs. Discuss whether your graphs confirm the claim in (b) that <span class="math inline">\(r \mapsto V^*_n(r)\)</span> is quasiconcave.</p>
<p>What conjectures do the graphs suggest about the optimal reservation policy and/or maximum expected reward and their variation with the various data elements? You will lose points on your conjectures only if your graphs are inconsistent with or do not support your conjectures, or if you don’t make enough interesting conjectures. The idea here is to brainstorm intelligently.</p>
</section>
</section>
<section id="solutions" class="level2">
<h2 class="anchored" data-anchor-id="solutions">Solutions</h2>
<section id="c-solving-the-problem-1" class="level3">
<h3 class="anchored" data-anchor-id="c-solving-the-problem-1">c) Solving the Problem</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Documentation</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div id="d48df861" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> binom</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="4abef914" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Functions</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> Value_calc(n, r, c, p, V_opt, prob_c):</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> prob_c<span class="op">*</span>(p<span class="op">*</span>V_opt[n<span class="op">-</span><span class="dv">1</span>][r<span class="op">+</span><span class="dv">1</span><span class="op">-</span>c] <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>p)<span class="op">*</span>V_opt[n<span class="op">-</span><span class="dv">1</span>][r<span class="op">-</span>c])</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> value</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> solve_mdp(T, f, S, p, q, r_max, penalty<span class="op">=</span><span class="kw">lambda</span> d, b: <span class="dv">0</span>):</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    V_opt <span class="op">=</span> {}</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    policy_opt <span class="op">=</span> {}</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(T<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        V_opt[n] <span class="op">=</span> {}</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        policy_opt[n] <span class="op">=</span> {}</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> n<span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> r <span class="kw">in</span>  <span class="bu">range</span>(T<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> r <span class="op">&lt;=</span> S:</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>                    V_opt[n][r] <span class="op">=</span> f<span class="op">*</span>r</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span>:</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>                    V_opt[n][r] <span class="op">=</span> f<span class="op">*</span>S <span class="op">-</span> penalty(f, r <span class="op">-</span> S)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> r <span class="kw">in</span> <span class="bu">range</span>(T<span class="op">+</span><span class="dv">1</span> <span class="op">-</span> n):</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>                cancellations <span class="op">=</span> {</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>                    c: binom.pmf(k<span class="op">=</span>c, n<span class="op">=</span>r, p<span class="op">=</span>q) <span class="cf">for</span> c <span class="kw">in</span> <span class="bu">range</span>(r)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>                V_accept <span class="op">=</span> <span class="bu">sum</span>([</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>                    Value_calc(n, r, c, p, V_opt, prob_c)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">for</span> c, prob_c <span class="kw">in</span> cancellations.items()</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>                ])</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>                V_reject <span class="op">=</span> <span class="bu">sum</span>([</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>                    Value_calc(n, r, c, <span class="dv">0</span>, V_opt, prob_c)</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">for</span> c, prob_c <span class="kw">in</span> cancellations.items()</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>                ])</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> r <span class="op">&gt;=</span> r_max:</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>                    policy_opt[n][r] <span class="op">=</span> <span class="st">"reject"</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>                    V_opt[n][r] <span class="op">=</span> V_reject</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span>:</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> V_accept <span class="op">&gt;=</span> V_reject:</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>                        policy_opt[n][r] <span class="op">=</span> <span class="st">"accept"</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>                        V_opt[n][r] <span class="op">=</span> V_accept</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">else</span>:</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>                        policy_opt[n][r] <span class="op">=</span> <span class="st">"reject"</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>                        V_opt[n][r] <span class="op">=</span> V_reject</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> policy_opt, V_opt</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> print_policy(policy_opt, V_opt):</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> n, policy_n <span class="kw">in</span> policy_opt.items():</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Epochs before flight: </span><span class="sc">{</span>n<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> r <span class="kw">in</span> policy_n:</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"When number of bookings is </span><span class="sc">{</span>r<span class="sc">}</span><span class="ss"> then policy: </span><span class="sc">{</span>policy_n[r]<span class="sc">}</span><span class="ss">, with value </span><span class="sc">{</span>V_opt[n][r]<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_policy(policy_opt, V_opt, n, title):</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    data_dict <span class="op">=</span> {<span class="st">'r'</span>: policy_opt[n].keys(), <span class="st">'policy'</span>: policy_opt[n].values(), <span class="st">'V_star'</span>: V_opt[n].values()}</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> pd.DataFrame(data_dict)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> px.line(data, x <span class="op">=</span> <span class="st">'r'</span>, y <span class="op">=</span> <span class="st">'V_star'</span>, color<span class="op">=</span><span class="st">'policy'</span>, title <span class="op">=</span> title, markers<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_policies(T, f, S, r_max, probs<span class="op">=</span>[(<span class="fl">0.2</span>, <span class="fl">0.05</span>), (<span class="fl">0.2</span>, <span class="fl">0.1</span>), (<span class="fl">0.3</span>, <span class="fl">0.05</span>), (<span class="fl">0.3</span>, <span class="fl">0.1</span>)], n<span class="op">=</span><span class="dv">10</span>, file_name<span class="op">=</span><span class="st">"airline-policies.png"</span>):</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get a list of colors to use for different (p, q) pairs</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>    color_sequence <span class="op">=</span> px.colors.qualitative.Plotly  <span class="co"># Default Plotly color sequence</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>    probs_colors <span class="op">=</span> {}  <span class="co"># Dictionary to map each (p, q) to a specific color</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> idx, (p, q) <span class="kw">in</span> <span class="bu">enumerate</span>(probs):</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>        policy_opt, V_opt <span class="op">=</span> solve_mdp(T, f, S, p, q, r_max, penalty<span class="op">=</span>penalty_func)</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>        data_dict <span class="op">=</span> {</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>            <span class="st">'r'</span>: <span class="bu">list</span>(policy_opt[<span class="dv">10</span>].keys()),</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>            <span class="st">'policy'</span>: <span class="bu">list</span>(policy_opt[<span class="dv">10</span>].values()),</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>            <span class="st">'V_star'</span>: <span class="bu">list</span>(V_opt[<span class="dv">10</span>].values())</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> pd.DataFrame(data_dict)</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> data.sort_values(<span class="st">'r'</span>)</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Assign a consistent color to this (p, q) pair</span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> color_sequence[idx <span class="op">%</span> <span class="bu">len</span>(color_sequence)]</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>        probs_colors[(p, q)] <span class="op">=</span> color</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Identify segments where policy is the same</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>        segments <span class="op">=</span> []</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>        current_policy <span class="op">=</span> <span class="va">None</span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>        current_segment <span class="op">=</span> {<span class="st">'r'</span>: [], <span class="st">'V_star'</span>: [], <span class="st">'policy'</span>: <span class="va">None</span>}</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> index, row <span class="kw">in</span> data.iterrows():</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>            policy <span class="op">=</span> row[<span class="st">'policy'</span>]</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> current_policy <span class="kw">is</span> <span class="va">None</span> <span class="kw">or</span> policy <span class="op">!=</span> current_policy:</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> current_segment[<span class="st">'r'</span>]:</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>                    segments.append(current_segment)</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>                current_policy <span class="op">=</span> policy</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>                current_segment <span class="op">=</span> {<span class="st">'r'</span>: [], <span class="st">'V_star'</span>: [], <span class="st">'policy'</span>: policy}</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>            current_segment[<span class="st">'r'</span>].append(row[<span class="st">'r'</span>])</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>            current_segment[<span class="st">'V_star'</span>].append(row[<span class="st">'V_star'</span>])</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>        segments.append(current_segment)  <span class="co"># Append the last segment</span></span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Plot each segment with appropriate line style and consistent color</span></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>        segment_count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> segment <span class="kw">in</span> segments:</span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>            line_dash <span class="op">=</span> <span class="st">'solid'</span> <span class="cf">if</span> segment[<span class="st">'policy'</span>] <span class="op">==</span> <span class="st">'accept'</span> <span class="cf">else</span> <span class="st">'dot'</span></span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>            showlegend <span class="op">=</span> segment_count <span class="op">==</span> <span class="dv">0</span>  <span class="co"># Show legend only for the first segment</span></span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>            segment_count <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(go.Scatter(</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>segment[<span class="st">'r'</span>],</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>segment[<span class="st">'V_star'</span>],</span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">'lines+markers'</span>,</span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="ss">f'p=</span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">, q=</span><span class="sc">{</span>q<span class="sc">}</span><span class="ss">'</span>,</span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>                text <span class="op">=</span> segment[<span class="st">'policy'</span>],</span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>                legendgroup<span class="op">=</span><span class="ss">f'p=</span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">, q=</span><span class="sc">{</span>q<span class="sc">}</span><span class="ss">'</span>,</span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>                showlegend<span class="op">=</span>showlegend,</span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(dash<span class="op">=</span>line_dash, color<span class="op">=</span>color)</span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>            ))</span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Edit the layout</span></span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(</span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="ss">f"Optimal values and policies </span><span class="sc">{</span>n<span class="sc">}</span><span class="ss"> epochs before flight"</span>,</span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>        xaxis_title<span class="op">=</span><span class="st">'Reservations (r)'</span>,</span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>        yaxis_title<span class="op">=</span><span class="st">'Optimal value (V*)'</span>,</span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>    fig.write_image(file_name, width<span class="op">=</span><span class="dv">800</span>, height<span class="op">=</span><span class="dv">600</span>, scale<span class="op">=</span><span class="dv">3</span>) <span class="co"># Save the plot as an image                                   </span></span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>    fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<section id="function-documentation-solve_mdp" class="level4">
<h4 class="anchored" data-anchor-id="function-documentation-solve_mdp">Function Documentation: <code>solve_mdp</code></h4>
<p><strong>Overview</strong></p>
<p>The <code>solve_mdp</code> function solves a finite-horizon Markov Decision Process (MDP) to determine an optimal reservation policy for an airline. The goal is to maximize the airline’s expected profit from a flight with a limited number of seats by making hourly decisions on whether to accept or reject incoming reservation requests. The function accounts for overbooking due to potential cancellations and applies penalties for denied boarding.</p>
<p><strong>Function Signature</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> solve_mdp(T, f, S, p, q, r_max, penalty<span class="op">=</span><span class="kw">lambda</span> d, b: <span class="dv">0</span>):</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>Parameters</em></p>
<ul>
<li><p><code>T</code> : int<br>
The total number of hours before flight time. This is the time horizon over which decisions are made.</p></li>
<li><p><code>f</code> : float<br>
The fare paid by each passenger who successfully boards the flight. This fare represents the reward associated with accepting a reservation.</p></li>
<li><p><code>S</code> : int<br>
The number of available seats on the flight. This is the maximum number of passengers that can board.</p></li>
<li><p><code>p</code> : float<br>
The probability of receiving a reservation request in each hour. This is the arrival rate of reservation requests.</p></li>
<li><p><code>q</code> : float<br>
The probability that a booked reservation is canceled. Each reservation has this independent probability of cancellation.</p></li>
<li><p><code>r_max</code> : int<br>
The upper limit for the number of reservations the airline is willing to accept (overbooking threshold). If the number of reservations exceeds this value, new requests are automatically rejected.</p></li>
<li><p><code>penalty</code> : function (optional)<br>
A function that calculates the penalty for denied boarding based on the number of overbooked passengers. The default penalty function is <code>lambda d, b: 0</code>, which implies no penalty for denied boarding.</p></li>
</ul>
<p><em>Returns</em></p>
<ul>
<li><p><code>policy_opt</code> : dict<br>
A dictionary that provides the optimal action (<code>"accept"</code> or <code>"reject"</code>) at each time step <code>n</code> and number of reservations <code>r</code>. It has the structure <code>policy_opt[n][r]</code>.</p></li>
<li><p><code>V_opt</code> : dict<br>
A dictionary that provides the maximum expected future profit at each time step <code>n</code> and reservation count <code>r</code>. It has the structure <code>V_opt[n][r]</code>.</p></li>
</ul>
<p><strong>Helper Function:</strong> <code>Value_calc</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> Value_calc(n, r, c, p, V_opt, prob_c):</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This helper function computes the expected value for accepting or rejecting a reservation, factoring in the probability of cancellations:</p>
<p><span class="math display">\[
\text{Value} = \text{prob}_c \cdot (p \cdot V_{\text{opt}}[n-1][r+1-c] + (1-p) \cdot V_{\text{opt}}[n-1][r-c])
\]</span></p>
<p>Where:</p>
<ul>
<li><p><code>n</code>: The current time step (hour before the flight).</p></li>
<li><p><code>r</code>: The current number of reservations.</p></li>
<li><p><code>c</code>: The number of cancellations.</p></li>
<li><p><code>p</code>: The probability of a reservation request.</p></li>
<li><p><code>V_opt</code>: The dictionary storing the value function.</p></li>
<li><p><code>prob_c</code>: The probability of having <code>c</code> cancellations (based on the binomial distribution).</p></li>
</ul>
<p><strong>Methodology</strong></p>
<p>The function uses dynamic programming with backward induction to compute the optimal reservation policy and the expected profit. The key challenge is balancing the potential profit from accepting more reservations against the risk of overbooking and paying penalties for denied boarding.</p>
<p><strong>Value Function Initialization</strong></p>
<p>At the final time step (<code>n = 0</code>), the value function is initialized based on the number of reservations <code>r</code>:</p>
<p><span class="math display">\[
V_0(r) =
\begin{cases}
f \cdot r &amp; \text{if } r \leq S \\
f \cdot S - f \cdot (r - S) - c(r - S) &amp; \text{if } r &gt; S
\end{cases}
\]</span></p>
<p>This represents the profit earned from passengers who successfully board the flight. If the number of reservations exceeds the seating capacity (<code>r &gt; S</code>), the fare for the overbooked passengers is forfeited, and the airline pays a penalty <code>c(b)</code>, where <code>b = r - S</code>.</p>
<p><strong>Recursive Value Calculation</strong></p>
<p>For each time step <code>n &gt; 0</code>, the function calculates the value of accepting (<code>V_{\text{accept}}</code>) or rejecting (<code>V_{\text{reject}}</code>) a reservation request. This is done using the <code>Value_calc</code> function, which computes the expected profit, taking cancellations into account. The value of accepting a reservation is: <span class="math display">\[
V_{\text{accept}} = \sum_{c=0}^{r} \binom{r}{c} q^c (1 - q)^{r - c} \left[ p \cdot V_{\text{opt}}[n-1][r+1-c] + (1-p) \cdot V_{\text{opt}}[n-1][r-c] \right]
\]</span> The value of rejecting a reservation is: <span class="math display">\[
V_{\text{reject}} = \sum_{c=0}^{r} \binom{r}{c} q^c (1 - q)^{r - c} V_{\text{opt}}[n-1][r-c]
\]</span></p>
<p><strong>Overbooking and Penalties</strong></p>
<p>If the number of reservations exceeds the capacity (<code>r &gt; S</code>), the function applies a penalty <code>c(b)</code> where <code>b = r - S</code> represents the number of overbooked passengers. The profit is adjusted to account for this penalty.</p>
<p><strong>Policy Decision</strong></p>
<p>At each time step and reservation level: - If <code>r &gt;= r_max</code>, the policy is automatically set to <code>"reject"</code> (to prevent excessive overbooking). - Otherwise, the policy compares the expected value of accepting vs.&nbsp;rejecting the reservation and selects the action that maximizes the expected profit: <span class="math display">\[
\text{policy}_{n}(r) =
\begin{cases}
\text{"accept"} &amp; \text{if } V_{\text{accept}} \geq V_{\text{reject}} \\
\text{"reject"} &amp; \text{otherwise}
\end{cases}
\]</span></p>
<p><strong>Example Usage</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">10</span>    <span class="co"># Time steps (hours before flight)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="dv">100</span>   <span class="co"># Fare per passenger</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> <span class="dv">50</span>    <span class="co"># Seating capacity</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fl">0.8</span>   <span class="co"># Probability of a reservation request</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> <span class="fl">0.1</span>   <span class="co"># Cancellation probability</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>r_max <span class="op">=</span> <span class="dv">60</span>  <span class="co"># Maximum allowable reservations</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>policy, value <span class="op">=</span> solve_mdp(T, f, S, p, q, r_max, penalty)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Notes</strong></p>
<ul>
<li><p>The function uses the binomial probability mass function (<code>binom.pmf</code>) to model the cancellation process. Each reservation has an independent probability <code>q</code> of being canceled.</p></li>
<li><p>The penalty for denied boarding, <code>c(b)</code>, can be adjusted based on the problem’s requirements, where <code>b = r - S</code> is the number of overbooked passengers.</p></li>
<li><p>The function solves the MDP by backward induction, starting from the final time step and working backward to the first time step to compute the optimal policy.</p></li>
</ul>
</section>
</div>
</div>
</div>
<section id="case" class="level4">
<h4 class="anchored" data-anchor-id="case">Case</h4>
<div id="8008242b" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="dv">300</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>p_cases <span class="op">=</span> [<span class="fl">0.2</span>, <span class="fl">0.3</span>]</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>q_cases <span class="op">=</span> [<span class="fl">0.05</span>, <span class="fl">0.1</span>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>r_max <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>penalty_func <span class="op">=</span> <span class="kw">lambda</span> d, b: d <span class="op">*</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="results" class="level4">
<h4 class="anchored" data-anchor-id="results">Results</h4>
<div id="e6b211d7" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>probs <span class="op">=</span> [(<span class="fl">0.2</span>, <span class="fl">0.05</span>), (<span class="fl">0.2</span>, <span class="fl">0.1</span>), (<span class="fl">0.3</span>, <span class="fl">0.05</span>), (<span class="fl">0.3</span>, <span class="fl">0.1</span>)]</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>n<span class="op">=</span><span class="dv">10</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>plot_policies(T, f, S, r_max, probs, n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="de1d0b6d-f9c3-4971-ac51-8b8202ff80ba" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("de1d0b6d-f9c3-4971-ac51-8b8202ff80ba")) {                    Plotly.newPlot(                        "de1d0b6d-f9c3-4971-ac51-8b8202ff80ba",                        [{"legendgroup":"p=0.2, q=0.05","line":{"color":"#636EFA","dash":"solid"},"mode":"lines+markers","name":"p=0.2, q=0.05","showlegend":true,"text":"accept","x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"y":[0.0,580.8643223541114,822.3366254537982,1015.3097693573275,1198.4381938512083,1379.0033786120491,1558.4763438478565,1736.4132406761526,1910.7297807604314,2077.345447803643,2230.3083810770117,2362.8590646459984,2469.1224788167697,2545.640099441648,2592.1048950943627],"type":"scatter"},{"legendgroup":"p=0.2, q=0.05","line":{"color":"#636EFA","dash":"dot"},"mode":"lines+markers","name":"p=0.2, q=0.05","showlegend":false,"text":"reject","x":[15,16,17,18,19,20],"y":[2611.3427521741028,2606.2943781058307,2569.6920926965213,2501.9782759408254,2406.2671959685194,2287.1963210371555],"type":"scatter"},{"legendgroup":"p=0.2, q=0.1","line":{"color":"#EF553B","dash":"solid"},"mode":"lines+markers","name":"p=0.2, q=0.1","showlegend":true,"text":"accept","x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"y":[0.0,363.30153726168174,543.1838753431125,676.7931016320172,794.5709306704334,905.7493276557051,1013.8235935687284,1120.3026681405859,1225.8654472621004,1330.7717194945626,1435.0122845625792,1538.3580418743704,1640.3731890519957,1740.4239871212942,1837.6988770754135,1931.2459918447228,2020.0271544451127,2102.9828485980456,2179.097570683674,2247.2210428862986],"type":"scatter"},{"legendgroup":"p=0.2, q=0.1","line":{"color":"#EF553B","dash":"dot"},"mode":"lines+markers","name":"p=0.2, q=0.1","showlegend":false,"text":"reject","x":[20],"y":[2294.4992559934817],"type":"scatter"},{"legendgroup":"p=0.3, q=0.05","line":{"color":"#00CC96","dash":"solid"},"mode":"lines+markers","name":"p=0.3, q=0.05","showlegend":true,"text":"accept","x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"y":[0.0,802.6202148187442,1062.0280932349922,1256.297015390774,1439.152825792747,1618.7935727952076,1795.662678266923,1967.3639330787619,2129.4603963232603,2276.196268088957,2401.7733824652073,2501.822573344225,2574.463074483874,2620.6912752165604,2643.413573288154],"type":"scatter"},{"legendgroup":"p=0.3, q=0.05","line":{"color":"#00CC96","dash":"dot"},"mode":"lines+markers","name":"p=0.3, q=0.05","showlegend":false,"text":"reject","x":[15,16,17,18,19,20],"y":[2648.8846199221357,2631.893004340672,2586.608587312995,2512.8015136902623,2412.9892313077908,2291.261150991917],"type":"scatter"},{"legendgroup":"p=0.3, q=0.1","line":{"color":"#AB63FA","dash":"solid"},"mode":"lines+markers","name":"p=0.3, q=0.1","showlegend":true,"text":"accept","x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"y":[0.0,521.8394884597442,730.5343628904686,870.5525889849955,989.8860135980243,1101.3726172253512,1209.3710846718775,1315.5610237665444,1420.5556221006034,1524.4320504644497,1626.926372767847,1727.5177172783065,1825.4813457802172,1919.9404882936085,2009.9260839841816,2094.4436517903882,2172.541905413643,2243.3766296087333,2306.2596619331093,2360.336488249464],"type":"scatter"},{"legendgroup":"p=0.3, q=0.1","line":{"color":"#AB63FA","dash":"dot"},"mode":"lines+markers","name":"p=0.3, q=0.1","showlegend":false,"text":"reject","x":[20],"y":[2392.052301986013],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"title":{"text":"Optimal values and policies 10 epochs before flight"},"xaxis":{"title":{"text":"Reservations (r)"}},"yaxis":{"title":{"text":"Optimal value (V*)"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('de1d0b6d-f9c3-4971-ac51-8b8202ff80ba');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<p>This chart shows the optimal values and policies for different combinations of <span class="math inline">\(p\)</span> and <span class="math inline">\(q\)</span> ten hours before the flight. The solid lines represent the optimal policy of accepting reservations, while the dotted lines represent the optimal policy of rejecting reservations. The gap in the lines indicates the level of <span class="math inline">\(r\)</span> where the policy switches from ‘accept’ to ‘reject’ The color coding indicates different combinations of <span class="math inline">\(p\)</span> and <span class="math inline">\(q\)</span>.</p>
</section>
<section id="conjectures" class="level4">
<h4 class="anchored" data-anchor-id="conjectures">Conjectures</h4>
<p><strong>Conjecture 1</strong> - The booking limit <span class="math inline">\(b_n\)</span> depends only on <span class="math inline">\(q\)</span> and not on <span class="math inline">\(p\)</span> and increases with <span class="math inline">\(q\)</span>.</p>
<p>Comparing the blue and green or red and purple lines (<span class="math inline">\(p\)</span> varies, <span class="math inline">\(q\)</span> is fixed) it is clear that the booking limit <span class="math inline">\(b_n\)</span> is independent of <span class="math inline">\(p\)</span>. While comparing the blue and red lines or green and purple (<span class="math inline">\(p\)</span> is fixed, <span class="math inline">\(q\)</span> varies) it is clear that the booking limit <span class="math inline">\(b_n\)</span> increases with <span class="math inline">\(q\)</span>.</p>
<p><strong>Conjecture 2</strong> - The optimal value <span class="math inline">\(V^*_n(r)\)</span> decreases with <span class="math inline">\(q\)</span> and increases with <span class="math inline">\(p\)</span>.</p>
<p>Comparing the blue and red or green and purple lines (<span class="math inline">\(q\)</span> varies, <span class="math inline">\(p\)</span> is fixed) it is clear that the optimal value <span class="math inline">\(V^*_n(r)\)</span> decreases with <span class="math inline">\(q\)</span>. While comparing the blue and green or red and purple lines (<span class="math inline">\(q\)</span> is fixed, <span class="math inline">\(p\)</span> varies) it is clear that the optimal value <span class="math inline">\(V^*_n(r)\)</span> increases with <span class="math inline">\(p\)</span>.</p>
</section>
<section id="cases" class="level4">
<h4 class="anchored" data-anchor-id="cases">Cases</h4>
<div id="5459a88a" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> p_cases[<span class="dv">0</span>]</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> q_cases[<span class="dv">0</span>]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>title <span class="op">=</span> <span class="ss">f"Optimal values and policies with p=</span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">, q=</span><span class="sc">{</span>q<span class="sc">}</span><span class="ss"> and </span><span class="sc">{</span>n<span class="sc">}</span><span class="ss"> epochs before flight"</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>policy_opt, V_opt <span class="op">=</span> solve_mdp(T, f, S, p, q, r_max, penalty<span class="op">=</span>penalty_func)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>plot_policy(policy_opt, V_opt, n, title)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>print_policy(policy_opt, V_opt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="4f8ab1cb-96ef-42fe-a508-240ba2d21668" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("4f8ab1cb-96ef-42fe-a508-240ba2d21668")) {                    Plotly.newPlot(                        "4f8ab1cb-96ef-42fe-a508-240ba2d21668",                        [{"hovertemplate":"policy=accept\u003cbr\u003er=%{x}\u003cbr\u003eV_star=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"accept","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"accept","orientation":"v","showlegend":true,"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"xaxis":"x","y":[0.0,580.8643223541114,822.3366254537982,1015.3097693573275,1198.4381938512083,1379.0033786120491,1558.4763438478565,1736.4132406761526,1910.7297807604314,2077.345447803643,2230.3083810770117,2362.8590646459984,2469.1224788167697,2545.640099441648,2592.1048950943627],"yaxis":"y","type":"scatter"},{"hovertemplate":"policy=reject\u003cbr\u003er=%{x}\u003cbr\u003eV_star=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"reject","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"reject","orientation":"v","showlegend":true,"x":[15,16,17,18,19,20],"xaxis":"x","y":[2611.3427521741028,2606.2943781058307,2569.6920926965213,2501.9782759408254,2406.2671959685194,2287.1963210371555],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"r"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"V_star"}},"legend":{"title":{"text":"policy"},"tracegroupgap":0},"title":{"text":"Optimal values and policies with p=0.2, q=0.05 and 10 epochs before flight"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('4f8ab1cb-96ef-42fe-a508-240ba2d21668');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Epochs before flight: 0
Epochs before flight: 1
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 342.00
When number of bookings is 2 then policy: accept, with value 629.85
When number of bookings is 3 then policy: accept, with value 914.99
When number of bookings is 4 then policy: accept, with value 1200.00
When number of bookings is 5 then policy: accept, with value 1485.00
When number of bookings is 6 then policy: accept, with value 1770.00
When number of bookings is 7 then policy: accept, with value 2055.00
When number of bookings is 8 then policy: accept, with value 2340.00
When number of bookings is 9 then policy: accept, with value 2625.00
When number of bookings is 10 then policy: reject, with value 2850.00
When number of bookings is 11 then policy: reject, with value 2793.72
When number of bookings is 12 then policy: reject, with value 2566.80
When number of bookings is 13 then policy: reject, with value 2292.95
When number of bookings is 14 then policy: reject, with value 2009.72
When number of bookings is 15 then policy: reject, with value 1724.97
When number of bookings is 16 then policy: reject, with value 1440.00
When number of bookings is 17 then policy: reject, with value 1155.00
When number of bookings is 18 then policy: reject, with value 870.00
When number of bookings is 19 then policy: reject, with value 585.00
When number of bookings is 20 then policy: reject, with value 300.00
When number of bookings is 21 then policy: reject, with value 15.00
When number of bookings is 22 then policy: reject, with value -270.00
When number of bookings is 23 then policy: reject, with value -555.00
When number of bookings is 24 then policy: reject, with value -840.00
When number of bookings is 25 then policy: reject, with value -1125.00
When number of bookings is 26 then policy: reject, with value -1410.00
When number of bookings is 27 then policy: reject, with value -1695.00
When number of bookings is 28 then policy: reject, with value -1980.00
When number of bookings is 29 then policy: reject, with value -2265.00
Epochs before flight: 2
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 379.59
When number of bookings is 2 then policy: accept, with value 657.87
When number of bookings is 3 then policy: accept, with value 929.20
When number of bookings is 4 then policy: accept, with value 1200.00
When number of bookings is 5 then policy: accept, with value 1470.75
When number of bookings is 6 then policy: accept, with value 1741.50
When number of bookings is 7 then policy: accept, with value 2012.25
When number of bookings is 8 then policy: accept, with value 2283.00
When number of bookings is 9 then policy: accept, with value 2546.19
When number of bookings is 10 then policy: accept, with value 2743.93
When number of bookings is 11 then policy: reject, with value 2790.24
When number of bookings is 12 then policy: reject, with value 2672.67
When number of bookings is 13 then policy: reject, with value 2457.55
When number of bookings is 14 then policy: reject, with value 2203.67
When number of bookings is 15 then policy: reject, with value 1937.39
When number of bookings is 16 then policy: reject, with value 1667.71
When number of bookings is 17 then policy: reject, with value 1397.19
When number of bookings is 18 then policy: reject, with value 1126.49
When number of bookings is 19 then policy: reject, with value 855.75
When number of bookings is 20 then policy: reject, with value 585.00
When number of bookings is 21 then policy: reject, with value 314.25
When number of bookings is 22 then policy: reject, with value 43.50
When number of bookings is 23 then policy: reject, with value -227.25
When number of bookings is 24 then policy: reject, with value -498.00
When number of bookings is 25 then policy: reject, with value -768.75
When number of bookings is 26 then policy: reject, with value -1039.50
When number of bookings is 27 then policy: reject, with value -1310.25
When number of bookings is 28 then policy: reject, with value -1581.00
Epochs before flight: 3
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 413.48
When number of bookings is 2 then policy: accept, with value 684.05
When number of bookings is 3 then policy: accept, with value 942.61
When number of bookings is 4 then policy: accept, with value 1199.98
When number of bookings is 5 then policy: accept, with value 1457.21
When number of bookings is 6 then policy: accept, with value 1714.42
When number of bookings is 7 then policy: accept, with value 1971.64
When number of bookings is 8 then policy: accept, with value 2227.85
When number of bookings is 9 then policy: accept, with value 2471.64
When number of bookings is 10 then policy: accept, with value 2661.06
When number of bookings is 11 then policy: reject, with value 2745.66
When number of bookings is 12 then policy: reject, with value 2716.72
When number of bookings is 13 then policy: reject, with value 2576.33
When number of bookings is 14 then policy: reject, with value 2369.90
When number of bookings is 15 then policy: reject, with value 2132.10
When number of bookings is 16 then policy: reject, with value 1881.59
When number of bookings is 17 then policy: reject, with value 1626.51
When number of bookings is 18 then policy: reject, with value 1369.93
When number of bookings is 19 then policy: reject, with value 1112.90
When number of bookings is 20 then policy: reject, with value 855.73
When number of bookings is 21 then policy: reject, with value 598.53
When number of bookings is 22 then policy: reject, with value 341.32
When number of bookings is 23 then policy: reject, with value 84.11
When number of bookings is 24 then policy: reject, with value -173.10
When number of bookings is 25 then policy: reject, with value -430.31
When number of bookings is 26 then policy: reject, with value -687.53
When number of bookings is 27 then policy: reject, with value -944.74
Epochs before flight: 4
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 444.22
When number of bookings is 2 then policy: accept, with value 708.45
When number of bookings is 3 then policy: accept, with value 955.24
When number of bookings is 4 then policy: accept, with value 1199.94
When number of bookings is 5 then policy: accept, with value 1444.34
When number of bookings is 6 then policy: accept, with value 1688.70
When number of bookings is 7 then policy: accept, with value 1932.92
When number of bookings is 8 then policy: accept, with value 2174.91
When number of bookings is 9 then policy: accept, with value 2403.01
When number of bookings is 10 then policy: accept, with value 2587.12
When number of bookings is 11 then policy: accept, with value 2692.05
When number of bookings is 12 then policy: reject, with value 2715.71
When number of bookings is 13 then policy: reject, with value 2645.83
When number of bookings is 14 then policy: reject, with value 2497.56
When number of bookings is 15 then policy: reject, with value 2300.19
When number of bookings is 16 then policy: reject, with value 2076.71
When number of bookings is 17 then policy: reject, with value 1840.92
When number of bookings is 18 then policy: reject, with value 1599.86
When number of bookings is 19 then policy: reject, with value 1356.70
When number of bookings is 20 then policy: reject, with value 1112.76
When number of bookings is 21 then policy: reject, with value 868.55
When number of bookings is 22 then policy: reject, with value 624.24
When number of bookings is 23 then policy: reject, with value 379.90
When number of bookings is 24 then policy: reject, with value 135.55
When number of bookings is 25 then policy: reject, with value -108.80
When number of bookings is 26 then policy: reject, with value -353.15
Epochs before flight: 5
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 472.21
When number of bookings is 2 then policy: accept, with value 731.14
When number of bookings is 3 then policy: accept, with value 967.09
When number of bookings is 4 then policy: accept, with value 1199.86
When number of bookings is 5 then policy: accept, with value 1432.11
When number of bookings is 6 then policy: accept, with value 1664.24
When number of bookings is 7 then policy: accept, with value 1895.97
When number of bookings is 8 then policy: accept, with value 2124.55
When number of bookings is 9 then policy: accept, with value 2339.51
When number of bookings is 10 then policy: accept, with value 2518.68
When number of bookings is 11 then policy: accept, with value 2637.66
When number of bookings is 12 then policy: reject, with value 2688.25
When number of bookings is 13 then policy: reject, with value 2673.42
When number of bookings is 14 then policy: reject, with value 2582.98
When number of bookings is 15 then policy: reject, with value 2433.80
When number of bookings is 16 then policy: reject, with value 2246.01
When number of bookings is 17 then policy: reject, with value 2035.85
When number of bookings is 18 then policy: reject, with value 1813.94
When number of bookings is 19 then policy: reject, with value 1586.31
When number of bookings is 20 then policy: reject, with value 1356.07
When number of bookings is 21 then policy: reject, with value 1124.71
When number of bookings is 22 then policy: reject, with value 892.87
When number of bookings is 23 then policy: reject, with value 660.85
When number of bookings is 24 then policy: reject, with value 428.75
When number of bookings is 25 then policy: reject, with value 196.64
Epochs before flight: 6
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 497.80
When number of bookings is 2 then policy: accept, with value 752.22
When number of bookings is 3 then policy: accept, with value 978.17
When number of bookings is 4 then policy: accept, with value 1199.72
When number of bookings is 5 then policy: accept, with value 1420.46
When number of bookings is 6 then policy: accept, with value 1640.96
When number of bookings is 7 then policy: accept, with value 1860.75
When number of bookings is 8 then policy: accept, with value 2076.86
When number of bookings is 9 then policy: accept, with value 2280.33
When number of bookings is 10 then policy: accept, with value 2454.66
When number of bookings is 11 then policy: accept, with value 2581.79
When number of bookings is 12 then policy: accept, with value 2651.80
When number of bookings is 13 then policy: reject, with value 2670.25
When number of bookings is 14 then policy: reject, with value 2629.48
When number of bookings is 15 then policy: reject, with value 2529.50
When number of bookings is 16 then policy: reject, with value 2383.31
When number of bookings is 17 then policy: reject, with value 2205.46
When number of bookings is 18 then policy: reject, with value 2007.98
When number of bookings is 19 then policy: reject, with value 1799.27
When number of bookings is 20 then policy: reject, with value 1584.54
When number of bookings is 21 then policy: reject, with value 1366.73
When number of bookings is 22 then policy: reject, with value 1147.45
When number of bookings is 23 then policy: reject, with value 927.47
When number of bookings is 24 then policy: reject, with value 707.17
Epochs before flight: 7
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 521.25
When number of bookings is 2 then policy: accept, with value 771.79
When number of bookings is 3 then policy: accept, with value 988.51
When number of bookings is 4 then policy: accept, with value 1199.53
When number of bookings is 5 then policy: accept, with value 1409.37
When number of bookings is 6 then policy: accept, with value 1618.80
When number of bookings is 7 then policy: accept, with value 1827.24
When number of bookings is 8 then policy: accept, with value 2031.77
When number of bookings is 9 then policy: accept, with value 2224.93
When number of bookings is 10 then policy: accept, with value 2394.20
When number of bookings is 11 then policy: accept, with value 2525.73
When number of bookings is 12 then policy: accept, with value 2610.65
When number of bookings is 13 then policy: reject, with value 2648.07
When number of bookings is 14 then policy: reject, with value 2644.83
When number of bookings is 15 then policy: reject, with value 2588.99
When number of bookings is 16 then policy: reject, with value 2485.63
When number of bookings is 17 then policy: reject, with value 2344.67
When number of bookings is 18 then policy: reject, with value 2176.94
When number of bookings is 19 then policy: reject, with value 1991.65
When number of bookings is 20 then policy: reject, with value 1795.57
When number of bookings is 21 then policy: reject, with value 1593.23
When number of bookings is 22 then policy: reject, with value 1387.43
When number of bookings is 23 then policy: reject, with value 1179.78
Epochs before flight: 8
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 542.79
When number of bookings is 2 then policy: accept, with value 789.94
When number of bookings is 3 then policy: accept, with value 998.13
When number of bookings is 4 then policy: accept, with value 1199.25
When number of bookings is 5 then policy: accept, with value 1398.78
When number of bookings is 6 then policy: accept, with value 1597.70
When number of bookings is 7 then policy: accept, with value 1795.39
When number of bookings is 8 then policy: accept, with value 1989.15
When number of bookings is 9 then policy: accept, with value 2172.85
When number of bookings is 10 then policy: accept, with value 2336.83
When number of bookings is 11 then policy: accept, with value 2470.33
When number of bookings is 12 then policy: accept, with value 2565.38
When number of bookings is 13 then policy: accept, with value 2619.40
When number of bookings is 14 then policy: reject, with value 2637.58
When number of bookings is 15 then policy: reject, with value 2617.60
When number of bookings is 16 then policy: reject, with value 2553.86
When number of bookings is 17 then policy: reject, with value 2450.95
When number of bookings is 18 then policy: reject, with value 2316.58
When number of bookings is 19 then policy: reject, with value 2159.02
When number of bookings is 20 then policy: reject, with value 1985.49
When number of bookings is 21 then policy: reject, with value 1801.56
When number of bookings is 22 then policy: reject, with value 1611.19
Epochs before flight: 9
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 562.61
When number of bookings is 2 then policy: accept, with value 806.76
When number of bookings is 3 then policy: accept, with value 1007.05
When number of bookings is 4 then policy: accept, with value 1198.89
When number of bookings is 5 then policy: accept, with value 1388.67
When number of bookings is 6 then policy: accept, with value 1577.60
When number of bookings is 7 then policy: accept, with value 1765.13
When number of bookings is 8 then policy: accept, with value 1948.85
When number of bookings is 9 then policy: accept, with value 2123.74
When number of bookings is 10 then policy: accept, with value 2282.27
When number of bookings is 11 then policy: accept, with value 2415.94
When number of bookings is 12 then policy: accept, with value 2517.85
When number of bookings is 13 then policy: accept, with value 2584.84
When number of bookings is 14 then policy: accept, with value 2617.81
When number of bookings is 15 then policy: reject, with value 2622.65
When number of bookings is 16 then policy: reject, with value 2592.08
When number of bookings is 17 then policy: reject, with value 2524.84
When number of bookings is 18 then policy: reject, with value 2424.77
When number of bookings is 19 then policy: reject, with value 2297.81
When number of bookings is 20 then policy: reject, with value 2150.38
When number of bookings is 21 then policy: reject, with value 1988.25
Epochs before flight: 10
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 580.86
When number of bookings is 2 then policy: accept, with value 822.34
When number of bookings is 3 then policy: accept, with value 1015.31
When number of bookings is 4 then policy: accept, with value 1198.44
When number of bookings is 5 then policy: accept, with value 1379.00
When number of bookings is 6 then policy: accept, with value 1558.48
When number of bookings is 7 then policy: accept, with value 1736.41
When number of bookings is 8 then policy: accept, with value 1910.73
When number of bookings is 9 then policy: accept, with value 2077.35
When number of bookings is 10 then policy: accept, with value 2230.31
When number of bookings is 11 then policy: accept, with value 2362.86
When number of bookings is 12 then policy: accept, with value 2469.12
When number of bookings is 13 then policy: accept, with value 2545.64
When number of bookings is 14 then policy: accept, with value 2592.10
When number of bookings is 15 then policy: reject, with value 2611.34
When number of bookings is 16 then policy: reject, with value 2606.29
When number of bookings is 17 then policy: reject, with value 2569.69
When number of bookings is 18 then policy: reject, with value 2501.98
When number of bookings is 19 then policy: reject, with value 2406.27
When number of bookings is 20 then policy: reject, with value 2287.20
Epochs before flight: 11
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 597.70
When number of bookings is 2 then policy: accept, with value 836.76
When number of bookings is 3 then policy: accept, with value 1022.93
When number of bookings is 4 then policy: accept, with value 1197.88
When number of bookings is 5 then policy: accept, with value 1369.75
When number of bookings is 6 then policy: accept, with value 1540.27
When number of bookings is 7 then policy: accept, with value 1709.15
When number of bookings is 8 then policy: accept, with value 1874.65
When number of bookings is 9 then policy: accept, with value 2033.43
When number of bookings is 10 then policy: accept, with value 2180.78
When number of bookings is 11 then policy: accept, with value 2311.27
When number of bookings is 12 then policy: accept, with value 2419.94
When number of bookings is 13 then policy: accept, with value 2503.40
When number of bookings is 14 then policy: accept, with value 2560.54
When number of bookings is 15 then policy: accept, with value 2592.41
When number of bookings is 16 then policy: reject, with value 2602.85
When number of bookings is 17 then policy: reject, with value 2590.56
When number of bookings is 18 then policy: reject, with value 2551.08
When number of bookings is 19 then policy: reject, with value 2484.92
Epochs before flight: 12
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 613.24
When number of bookings is 2 then policy: accept, with value 850.10
When number of bookings is 3 then policy: accept, with value 1029.95
When number of bookings is 4 then policy: accept, with value 1197.23
When number of bookings is 5 then policy: accept, with value 1360.87
When number of bookings is 6 then policy: accept, with value 1522.93
When number of bookings is 7 then policy: accept, with value 1683.28
When number of bookings is 8 then policy: accept, with value 1840.47
When number of bookings is 9 then policy: accept, with value 1991.83
When number of bookings is 10 then policy: accept, with value 2133.55
When number of bookings is 11 then policy: accept, with value 2261.29
When number of bookings is 12 then policy: accept, with value 2370.87
When number of bookings is 13 then policy: accept, with value 2459.15
When number of bookings is 14 then policy: accept, with value 2524.56
When number of bookings is 15 then policy: accept, with value 2567.31
When number of bookings is 16 then policy: accept, with value 2588.99
When number of bookings is 17 then policy: reject, with value 2593.33
When number of bookings is 18 then policy: reject, with value 2576.60
Epochs before flight: 13
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 627.58
When number of bookings is 2 then policy: accept, with value 862.44
When number of bookings is 3 then policy: accept, with value 1036.40
When number of bookings is 4 then policy: accept, with value 1196.46
When number of bookings is 5 then policy: accept, with value 1352.36
When number of bookings is 6 then policy: accept, with value 1506.42
When number of bookings is 7 then policy: accept, with value 1658.71
When number of bookings is 8 then policy: accept, with value 1808.09
When number of bookings is 9 then policy: accept, with value 1952.37
When number of bookings is 10 then policy: accept, with value 2088.51
When number of bookings is 11 then policy: accept, with value 2213.00
When number of bookings is 12 then policy: accept, with value 2322.34
When number of bookings is 13 then policy: accept, with value 2413.72
When number of bookings is 14 then policy: accept, with value 2485.37
When number of bookings is 15 then policy: accept, with value 2536.86
When number of bookings is 16 then policy: accept, with value 2569.06
When number of bookings is 17 then policy: accept, with value 2583.54
Epochs before flight: 14
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 640.82
When number of bookings is 2 then policy: accept, with value 873.83
When number of bookings is 3 then policy: accept, with value 1042.30
When number of bookings is 4 then policy: accept, with value 1195.60
When number of bookings is 5 then policy: accept, with value 1344.19
When number of bookings is 6 then policy: accept, with value 1490.69
When number of bookings is 7 then policy: accept, with value 1635.38
When number of bookings is 8 then policy: accept, with value 1777.37
When number of bookings is 9 then policy: accept, with value 1914.91
When number of bookings is 10 then policy: accept, with value 2045.55
When number of bookings is 11 then policy: accept, with value 2166.44
When number of bookings is 12 then policy: accept, with value 2274.67
When number of bookings is 13 then policy: accept, with value 2367.74
When number of bookings is 14 then policy: accept, with value 2443.90
When number of bookings is 15 then policy: accept, with value 2502.35
When number of bookings is 16 then policy: accept, with value 2543.28
Epochs before flight: 15
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 653.06
When number of bookings is 2 then policy: accept, with value 884.35
When number of bookings is 3 then policy: accept, with value 1047.68
When number of bookings is 4 then policy: accept, with value 1194.62
When number of bookings is 5 then policy: accept, with value 1336.33
When number of bookings is 6 then policy: accept, with value 1475.71
When number of bookings is 7 then policy: accept, with value 1613.22
When number of bookings is 8 then policy: accept, with value 1748.24
When number of bookings is 9 then policy: accept, with value 1879.34
When number of bookings is 10 then policy: accept, with value 2004.58
When number of bookings is 11 then policy: accept, with value 2121.63
When number of bookings is 12 then policy: accept, with value 2228.07
When number of bookings is 13 then policy: accept, with value 2321.74
When number of bookings is 14 then policy: accept, with value 2400.95
When number of bookings is 15 then policy: accept, with value 2464.73
Epochs before flight: 16
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 664.35
When number of bookings is 2 then policy: accept, with value 894.04
When number of bookings is 3 then policy: accept, with value 1052.58
When number of bookings is 4 then policy: accept, with value 1193.55
When number of bookings is 5 then policy: accept, with value 1328.76
When number of bookings is 6 then policy: accept, with value 1461.42
When number of bookings is 7 then policy: accept, with value 1592.16
When number of bookings is 8 then policy: accept, with value 1720.57
When number of bookings is 9 then policy: accept, with value 1845.55
When number of bookings is 10 then policy: accept, with value 1965.51
When number of bookings is 11 then policy: accept, with value 2078.56
When number of bookings is 12 then policy: accept, with value 2182.71
When number of bookings is 13 then policy: accept, with value 2276.09
When number of bookings is 14 then policy: accept, with value 2357.16
Epochs before flight: 17
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 674.77
When number of bookings is 2 then policy: accept, with value 902.97
When number of bookings is 3 then policy: accept, with value 1057.01
When number of bookings is 4 then policy: accept, with value 1192.37
When number of bookings is 5 then policy: accept, with value 1321.48
When number of bookings is 6 then policy: accept, with value 1447.79
When number of bookings is 7 then policy: accept, with value 1572.14
When number of bookings is 8 then policy: accept, with value 1694.30
When number of bookings is 9 then policy: accept, with value 1813.43
When number of bookings is 10 then policy: accept, with value 1928.25
When number of bookings is 11 then policy: accept, with value 2037.23
When number of bookings is 12 then policy: accept, with value 2138.71
When number of bookings is 13 then policy: accept, with value 2231.12
Epochs before flight: 18
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 684.39
When number of bookings is 2 then policy: accept, with value 911.17
When number of bookings is 3 then policy: accept, with value 1061.01
When number of bookings is 4 then policy: accept, with value 1191.10
When number of bookings is 5 then policy: accept, with value 1314.45
When number of bookings is 6 then policy: accept, with value 1434.78
When number of bookings is 7 then policy: accept, with value 1553.09
When number of bookings is 8 then policy: accept, with value 1669.34
When number of bookings is 9 then policy: accept, with value 1782.89
When number of bookings is 10 then policy: accept, with value 1892.72
When number of bookings is 11 then policy: accept, with value 1997.59
When number of bookings is 12 then policy: accept, with value 2096.15
Epochs before flight: 19
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 693.26
When number of bookings is 2 then policy: accept, with value 918.70
When number of bookings is 3 then policy: accept, with value 1064.60
When number of bookings is 4 then policy: accept, with value 1189.74
When number of bookings is 5 then policy: accept, with value 1307.66
When number of bookings is 6 then policy: accept, with value 1422.35
When number of bookings is 7 then policy: accept, with value 1534.97
When number of bookings is 8 then policy: accept, with value 1645.62
When number of bookings is 9 then policy: accept, with value 1753.84
When number of bookings is 10 then policy: accept, with value 1858.84
When number of bookings is 11 then policy: accept, with value 1959.62
Epochs before flight: 20
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 701.43
When number of bookings is 2 then policy: accept, with value 925.61
When number of bookings is 3 then policy: accept, with value 1067.80
When number of bookings is 4 then policy: accept, with value 1188.29
When number of bookings is 5 then policy: accept, with value 1301.11
When number of bookings is 6 then policy: accept, with value 1410.47
When number of bookings is 7 then policy: accept, with value 1517.71
When number of bookings is 8 then policy: accept, with value 1623.05
When number of bookings is 9 then policy: accept, with value 1726.20
When number of bookings is 10 then policy: accept, with value 1826.55
Epochs before flight: 21
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 708.95
When number of bookings is 2 then policy: accept, with value 931.92
When number of bookings is 3 then policy: accept, with value 1070.63
When number of bookings is 4 then policy: accept, with value 1186.75
When number of bookings is 5 then policy: accept, with value 1294.76
When number of bookings is 6 then policy: accept, with value 1399.10
When number of bookings is 7 then policy: accept, with value 1501.26
When number of bookings is 8 then policy: accept, with value 1601.58
When number of bookings is 9 then policy: accept, with value 1699.90
Epochs before flight: 22
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 715.87
When number of bookings is 2 then policy: accept, with value 937.68
When number of bookings is 3 then policy: accept, with value 1073.13
When number of bookings is 4 then policy: accept, with value 1185.13
When number of bookings is 5 then policy: accept, with value 1288.61
When number of bookings is 6 then policy: accept, with value 1388.23
When number of bookings is 7 then policy: accept, with value 1485.58
When number of bookings is 8 then policy: accept, with value 1581.14
Epochs before flight: 23
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 722.22
When number of bookings is 2 then policy: accept, with value 942.93
When number of bookings is 3 then policy: accept, with value 1075.30
When number of bookings is 4 then policy: accept, with value 1183.43
When number of bookings is 5 then policy: accept, with value 1282.65
When number of bookings is 6 then policy: accept, with value 1377.80
When number of bookings is 7 then policy: accept, with value 1470.62
Epochs before flight: 24
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 728.04
When number of bookings is 2 then policy: accept, with value 947.69
When number of bookings is 3 then policy: accept, with value 1077.17
When number of bookings is 4 then policy: accept, with value 1181.66
When number of bookings is 5 then policy: accept, with value 1276.86
When number of bookings is 6 then policy: accept, with value 1367.81
Epochs before flight: 25
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 733.37
When number of bookings is 2 then policy: accept, with value 952.00
When number of bookings is 3 then policy: accept, with value 1078.76
When number of bookings is 4 then policy: accept, with value 1179.81
When number of bookings is 5 then policy: accept, with value 1271.24
Epochs before flight: 26
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 738.24
When number of bookings is 2 then policy: accept, with value 955.88
When number of bookings is 3 then policy: accept, with value 1080.07
When number of bookings is 4 then policy: accept, with value 1177.90
Epochs before flight: 27
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 742.68
When number of bookings is 2 then policy: accept, with value 959.37
When number of bookings is 3 then policy: accept, with value 1081.14
Epochs before flight: 28
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 746.72
When number of bookings is 2 then policy: accept, with value 962.48
Epochs before flight: 29
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 750.38
Epochs before flight: 30
When number of bookings is 0 then policy: accept, with value 0.00</code></pre>
</div>
</div>
<div id="3c5e90b6" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> p_cases[<span class="dv">0</span>]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> q_cases[<span class="dv">1</span>]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>title <span class="op">=</span> <span class="ss">f"Optimal values and policies with p=</span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">, q=</span><span class="sc">{</span>q<span class="sc">}</span><span class="ss"> and </span><span class="sc">{</span>n<span class="sc">}</span><span class="ss"> epochs before flight"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>policy_opt, V_opt <span class="op">=</span> solve_mdp(T, f, S, p, q, r_max, penalty<span class="op">=</span>penalty_func)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>plot_policy(policy_opt, V_opt, n, title)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>print_policy(policy_opt, V_opt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="a0c1f6c0-fea7-4614-8546-d6630d5cad0f" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("a0c1f6c0-fea7-4614-8546-d6630d5cad0f")) {                    Plotly.newPlot(                        "a0c1f6c0-fea7-4614-8546-d6630d5cad0f",                        [{"hovertemplate":"policy=accept\u003cbr\u003er=%{x}\u003cbr\u003eV_star=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"accept","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"accept","orientation":"v","showlegend":true,"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"xaxis":"x","y":[0.0,363.30153726168174,543.1838753431125,676.7931016320172,794.5709306704334,905.7493276557051,1013.8235935687284,1120.3026681405859,1225.8654472621004,1330.7717194945626,1435.0122845625792,1538.3580418743704,1640.3731890519957,1740.4239871212942,1837.6988770754135,1931.2459918447228,2020.0271544451127,2102.9828485980456,2179.097570683674,2247.2210428862986],"yaxis":"y","type":"scatter"},{"hovertemplate":"policy=reject\u003cbr\u003er=%{x}\u003cbr\u003eV_star=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"reject","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"reject","orientation":"v","showlegend":true,"x":[20],"xaxis":"x","y":[2294.4992559934817],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"r"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"V_star"}},"legend":{"title":{"text":"policy"},"tracegroupgap":0},"title":{"text":"Optimal values and policies with p=0.2, q=0.1 and 10 epochs before flight"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('a0c1f6c0-fea7-4614-8546-d6630d5cad0f');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Epochs before flight: 0
Epochs before flight: 1
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 324.00
When number of bookings is 2 then policy: accept, with value 599.40
When number of bookings is 3 then policy: accept, with value 869.94
When number of bookings is 4 then policy: accept, with value 1139.99
When number of bookings is 5 then policy: accept, with value 1410.00
When number of bookings is 6 then policy: accept, with value 1680.00
When number of bookings is 7 then policy: accept, with value 1950.00
When number of bookings is 8 then policy: accept, with value 2220.00
When number of bookings is 9 then policy: accept, with value 2490.00
When number of bookings is 10 then policy: accept, with value 2718.16
When number of bookings is 11 then policy: reject, with value 2781.71
When number of bookings is 12 then policy: reject, with value 2675.14
When number of bookings is 13 then policy: reject, with value 2465.01
When number of bookings is 14 then policy: reject, with value 2213.46
When number of bookings is 15 then policy: reject, with value 1948.44
When number of bookings is 16 then policy: reject, with value 1679.66
When number of bookings is 17 then policy: reject, with value 1409.93
When number of bookings is 18 then policy: reject, with value 1139.99
When number of bookings is 19 then policy: reject, with value 870.00
When number of bookings is 20 then policy: reject, with value 600.00
When number of bookings is 21 then policy: reject, with value 330.00
When number of bookings is 22 then policy: reject, with value 60.00
When number of bookings is 23 then policy: reject, with value -210.00
When number of bookings is 24 then policy: reject, with value -480.00
When number of bookings is 25 then policy: reject, with value -750.00
When number of bookings is 26 then policy: reject, with value -1020.00
When number of bookings is 27 then policy: reject, with value -1290.00
When number of bookings is 28 then policy: reject, with value -1560.00
When number of bookings is 29 then policy: reject, with value -1830.00
Epochs before flight: 2
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 341.17
When number of bookings is 2 then policy: accept, with value 597.58
When number of bookings is 3 then policy: accept, with value 842.60
When number of bookings is 4 then policy: accept, with value 1085.93
When number of bookings is 5 then policy: accept, with value 1328.99
When number of bookings is 6 then policy: accept, with value 1572.00
When number of bookings is 7 then policy: accept, with value 1815.00
When number of bookings is 8 then policy: accept, with value 2058.00
When number of bookings is 9 then policy: accept, with value 2297.76
When number of bookings is 10 then policy: accept, with value 2511.77
When number of bookings is 11 then policy: accept, with value 2651.78
When number of bookings is 12 then policy: reject, with value 2696.39
When number of bookings is 13 then policy: reject, with value 2643.76
When number of bookings is 14 then policy: reject, with value 2506.26
When number of bookings is 15 then policy: reject, with value 2315.51
When number of bookings is 16 then policy: reject, with value 2096.10
When number of bookings is 17 then policy: reject, with value 1862.95
When number of bookings is 18 then policy: reject, with value 1623.81
When number of bookings is 19 then policy: reject, with value 1382.24
When number of bookings is 20 then policy: reject, with value 1139.75
When number of bookings is 21 then policy: reject, with value 896.92
When number of bookings is 22 then policy: reject, with value 653.97
When number of bookings is 23 then policy: reject, with value 410.99
When number of bookings is 24 then policy: reject, with value 168.00
When number of bookings is 25 then policy: reject, with value -75.00
When number of bookings is 26 then policy: reject, with value -318.00
When number of bookings is 27 then policy: reject, with value -561.00
When number of bookings is 28 then policy: reject, with value -804.00
Epochs before flight: 3
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 353.21
When number of bookings is 2 then policy: accept, with value 594.37
When number of bookings is 3 then policy: accept, with value 817.45
When number of bookings is 4 then policy: accept, with value 1037.10
When number of bookings is 5 then policy: accept, with value 1256.03
When number of bookings is 6 then policy: accept, with value 1474.78
When number of bookings is 7 then policy: accept, with value 1693.50
When number of bookings is 8 then policy: accept, with value 1911.92
When number of bookings is 9 then policy: accept, with value 2127.15
When number of bookings is 10 then policy: accept, with value 2327.55
When number of bookings is 11 then policy: accept, with value 2491.18
When number of bookings is 12 then policy: accept, with value 2597.28
When number of bookings is 13 then policy: reject, with value 2638.27
When number of bookings is 14 then policy: reject, with value 2618.55
When number of bookings is 15 then policy: reject, with value 2533.86
When number of bookings is 16 then policy: reject, with value 2398.65
When number of bookings is 17 then policy: reject, with value 2228.54
When number of bookings is 18 then policy: reject, with value 2036.50
When number of bookings is 19 then policy: reject, with value 1831.69
When number of bookings is 20 then policy: reject, with value 1619.92
When number of bookings is 21 then policy: reject, with value 1404.54
When number of bookings is 22 then policy: reject, with value 1187.38
When number of bookings is 23 then policy: reject, with value 969.38
When number of bookings is 24 then policy: reject, with value 750.98
When number of bookings is 25 then policy: reject, with value 532.41
When number of bookings is 26 then policy: reject, with value 313.76
When number of bookings is 27 then policy: reject, with value 95.09
Epochs before flight: 4
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 361.30
When number of bookings is 2 then policy: accept, with value 589.84
When number of bookings is 3 then policy: accept, with value 794.06
When number of bookings is 4 then policy: accept, with value 992.85
When number of bookings is 5 then policy: accept, with value 1190.24
When number of bookings is 6 then policy: accept, with value 1387.24
When number of bookings is 7 then policy: accept, with value 1584.10
When number of bookings is 8 then policy: accept, with value 1780.53
When number of bookings is 9 then policy: accept, with value 1974.55
When number of bookings is 10 then policy: accept, with value 2160.05
When number of bookings is 11 then policy: accept, with value 2325.87
When number of bookings is 12 then policy: accept, with value 2458.90
When number of bookings is 13 then policy: accept, with value 2549.01
When number of bookings is 14 then policy: accept, with value 2591.27
When number of bookings is 15 then policy: reject, with value 2593.96
When number of bookings is 16 then policy: reject, with value 2548.79
When number of bookings is 17 then policy: reject, with value 2460.60
When number of bookings is 18 then policy: reject, with value 2337.67
When number of bookings is 19 then policy: reject, with value 2188.87
When number of bookings is 20 then policy: reject, with value 2021.99
When number of bookings is 21 then policy: reject, with value 1843.18
When number of bookings is 22 then policy: reject, with value 1656.85
When number of bookings is 23 then policy: reject, with value 1465.97
When number of bookings is 24 then policy: reject, with value 1272.42
When number of bookings is 25 then policy: reject, with value 1077.35
When number of bookings is 26 then policy: reject, with value 881.45
Epochs before flight: 5
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 366.30
When number of bookings is 2 then policy: accept, with value 584.11
When number of bookings is 3 then policy: accept, with value 772.10
When number of bookings is 4 then policy: accept, with value 952.57
When number of bookings is 5 then policy: accept, with value 1130.82
When number of bookings is 6 then policy: accept, with value 1308.36
When number of bookings is 7 then policy: accept, with value 1485.59
When number of bookings is 8 then policy: accept, with value 1662.37
When number of bookings is 9 then policy: accept, with value 1837.47
When number of bookings is 10 then policy: accept, with value 2007.58
When number of bookings is 11 then policy: accept, with value 2166.78
When number of bookings is 12 then policy: accept, with value 2307.29
When number of bookings is 13 then policy: accept, with value 2421.30
When number of bookings is 14 then policy: accept, with value 2503.13
When number of bookings is 15 then policy: accept, with value 2550.66
When number of bookings is 16 then policy: reject, with value 2566.30
When number of bookings is 17 then policy: reject, with value 2550.59
When number of bookings is 18 then policy: reject, with value 2500.43
When number of bookings is 19 then policy: reject, with value 2419.35
When number of bookings is 20 then policy: reject, with value 2312.30
When number of bookings is 21 then policy: reject, with value 2184.64
When number of bookings is 22 then policy: reject, with value 2041.41
When number of bookings is 23 then policy: reject, with value 1886.89
When number of bookings is 24 then policy: reject, with value 1724.48
When number of bookings is 25 then policy: reject, with value 1556.71
Epochs before flight: 6
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 368.88
When number of bookings is 2 then policy: accept, with value 577.36
When number of bookings is 3 then policy: accept, with value 751.31
When number of bookings is 4 then policy: accept, with value 915.73
When number of bookings is 5 then policy: accept, with value 1077.03
When number of bookings is 6 then policy: accept, with value 1237.19
When number of bookings is 7 then policy: accept, with value 1396.86
When number of bookings is 8 then policy: accept, with value 1556.06
When number of bookings is 9 then policy: accept, with value 1714.08
When number of bookings is 10 then policy: accept, with value 1869.13
When number of bookings is 11 then policy: accept, with value 2017.98
When number of bookings is 12 then policy: accept, with value 2156.11
When number of bookings is 13 then policy: accept, with value 2278.38
When number of bookings is 14 then policy: accept, with value 2380.02
When number of bookings is 15 then policy: accept, with value 2457.57
When number of bookings is 16 then policy: accept, with value 2509.49
When number of bookings is 17 then policy: accept, with value 2535.38
When number of bookings is 18 then policy: reject, with value 2539.63
When number of bookings is 19 then policy: reject, with value 2518.77
When number of bookings is 20 then policy: reject, with value 2472.48
When number of bookings is 21 then policy: reject, with value 2402.84
When number of bookings is 22 then policy: reject, with value 2312.79
When number of bookings is 23 then policy: reject, with value 2205.65
When number of bookings is 24 then policy: reject, with value 2084.77
Epochs before flight: 7
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 369.52
When number of bookings is 2 then policy: accept, with value 569.75
When number of bookings is 3 then policy: accept, with value 731.52
When number of bookings is 4 then policy: accept, with value 881.87
When number of bookings is 5 then policy: accept, with value 1028.19
When number of bookings is 6 then policy: accept, with value 1172.90
When number of bookings is 7 then policy: accept, with value 1316.87
When number of bookings is 8 then policy: accept, with value 1460.32
When number of bookings is 9 then policy: accept, with value 1602.92
When number of bookings is 10 then policy: accept, with value 1743.69
When number of bookings is 11 then policy: accept, with value 1880.85
When number of bookings is 12 then policy: accept, with value 2011.82
When number of bookings is 13 then policy: accept, with value 2133.41
When number of bookings is 14 then policy: accept, with value 2242.25
When number of bookings is 15 then policy: accept, with value 2335.27
When number of bookings is 16 then policy: accept, with value 2410.11
When number of bookings is 17 then policy: accept, with value 2465.42
When number of bookings is 18 then policy: accept, with value 2501.04
When number of bookings is 19 then policy: accept, with value 2517.05
When number of bookings is 20 then policy: reject, with value 2517.60
When number of bookings is 21 then policy: reject, with value 2498.53
When number of bookings is 22 then policy: reject, with value 2460.12
When number of bookings is 23 then policy: reject, with value 2403.50
Epochs before flight: 8
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 368.61
When number of bookings is 2 then policy: accept, with value 561.42
When number of bookings is 3 then policy: accept, with value 712.57
When number of bookings is 4 then policy: accept, with value 850.61
When number of bookings is 5 then policy: accept, with value 983.70
When number of bookings is 6 then policy: accept, with value 1114.69
When number of bookings is 7 then policy: accept, with value 1244.68
When number of bookings is 8 then policy: accept, with value 1374.04
When number of bookings is 9 then policy: accept, with value 1502.72
When number of bookings is 10 then policy: accept, with value 1630.21
When number of bookings is 11 then policy: accept, with value 1755.56
When number of bookings is 12 then policy: accept, with value 1877.28
When number of bookings is 13 then policy: accept, with value 1993.47
When number of bookings is 14 then policy: accept, with value 2101.94
When number of bookings is 15 then policy: accept, with value 2200.43
When number of bookings is 16 then policy: accept, with value 2286.87
When number of bookings is 17 then policy: accept, with value 2359.60
When number of bookings is 18 then policy: accept, with value 2417.48
When number of bookings is 19 then policy: accept, with value 2460.03
When number of bookings is 20 then policy: reject, with value 2483.92
When number of bookings is 21 then policy: reject, with value 2499.77
When number of bookings is 22 then policy: reject, with value 2500.74
Epochs before flight: 9
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 366.45
When number of bookings is 2 then policy: accept, with value 552.53
When number of bookings is 3 then policy: accept, with value 694.35
When number of bookings is 4 then policy: accept, with value 821.61
When number of bookings is 5 then policy: accept, with value 943.05
When number of bookings is 6 then policy: accept, with value 1061.88
When number of bookings is 7 then policy: accept, with value 1179.41
When number of bookings is 8 then policy: accept, with value 1296.20
When number of bookings is 9 then policy: accept, with value 1412.35
When number of bookings is 10 then policy: accept, with value 1527.66
When number of bookings is 11 then policy: accept, with value 1641.64
When number of bookings is 12 then policy: accept, with value 1753.45
When number of bookings is 13 then policy: accept, with value 1862.00
When number of bookings is 14 then policy: accept, with value 1965.91
When number of bookings is 15 then policy: accept, with value 2063.68
When number of bookings is 16 then policy: accept, with value 2153.78
When number of bookings is 17 then policy: accept, with value 2234.77
When number of bookings is 18 then policy: accept, with value 2305.43
When number of bookings is 19 then policy: accept, with value 2364.75
When number of bookings is 20 then policy: reject, with value 2403.53
When number of bookings is 21 then policy: reject, with value 2441.28
Epochs before flight: 10
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 363.30
When number of bookings is 2 then policy: accept, with value 543.18
When number of bookings is 3 then policy: accept, with value 676.79
When number of bookings is 4 then policy: accept, with value 794.57
When number of bookings is 5 then policy: accept, with value 905.75
When number of bookings is 6 then policy: accept, with value 1013.82
When number of bookings is 7 then policy: accept, with value 1120.30
When number of bookings is 8 then policy: accept, with value 1225.87
When number of bookings is 9 then policy: accept, with value 1330.77
When number of bookings is 10 then policy: accept, with value 1435.01
When number of bookings is 11 then policy: accept, with value 1538.36
When number of bookings is 12 then policy: accept, with value 1640.37
When number of bookings is 13 then policy: accept, with value 1740.42
When number of bookings is 14 then policy: accept, with value 1837.70
When number of bookings is 15 then policy: accept, with value 1931.25
When number of bookings is 16 then policy: accept, with value 2020.03
When number of bookings is 17 then policy: accept, with value 2102.98
When number of bookings is 18 then policy: accept, with value 2179.10
When number of bookings is 19 then policy: accept, with value 2247.22
When number of bookings is 20 then policy: reject, with value 2294.50
Epochs before flight: 11
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 359.35
When number of bookings is 2 then policy: accept, with value 533.49
When number of bookings is 3 then policy: accept, with value 659.82
When number of bookings is 4 then policy: accept, with value 769.26
When number of bookings is 5 then policy: accept, with value 871.40
When number of bookings is 6 then policy: accept, with value 969.98
When number of bookings is 7 then policy: accept, with value 1066.65
When number of bookings is 8 then policy: accept, with value 1162.22
When number of bookings is 9 then policy: accept, with value 1257.06
When number of bookings is 10 then policy: accept, with value 1351.30
When number of bookings is 11 then policy: accept, with value 1444.87
When number of bookings is 12 then policy: accept, with value 1537.57
When number of bookings is 13 then policy: accept, with value 1629.05
When number of bookings is 14 then policy: accept, with value 1718.86
When number of bookings is 15 then policy: accept, with value 1806.40
When number of bookings is 16 then policy: accept, with value 1891.03
When number of bookings is 17 then policy: accept, with value 1972.02
When number of bookings is 18 then policy: accept, with value 2048.62
When number of bookings is 19 then policy: accept, with value 2119.77
Epochs before flight: 12
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 354.76
When number of bookings is 2 then policy: accept, with value 523.55
When number of bookings is 3 then policy: accept, with value 643.39
When number of bookings is 4 then policy: accept, with value 745.48
When number of bookings is 5 then policy: accept, with value 839.65
When number of bookings is 6 then policy: accept, with value 929.83
When number of bookings is 7 then policy: accept, with value 1017.82
When number of bookings is 8 then policy: accept, with value 1104.51
When number of bookings is 9 then policy: accept, with value 1190.38
When number of bookings is 10 then policy: accept, with value 1275.62
When number of bookings is 11 then policy: accept, with value 1360.29
When number of bookings is 12 then policy: accept, with value 1444.34
When number of bookings is 13 then policy: accept, with value 1527.60
When number of bookings is 14 then policy: accept, with value 1609.80
When number of bookings is 15 then policy: accept, with value 1690.63
When number of bookings is 16 then policy: accept, with value 1769.67
When number of bookings is 17 then policy: accept, with value 1846.48
When number of bookings is 18 then policy: accept, with value 1920.53
Epochs before flight: 13
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 349.67
When number of bookings is 2 then policy: accept, with value 513.42
When number of bookings is 3 then policy: accept, with value 627.45
When number of bookings is 4 then policy: accept, with value 723.04
When number of bookings is 5 then policy: accept, with value 810.19
When number of bookings is 6 then policy: accept, with value 892.96
When number of bookings is 7 then policy: accept, with value 973.26
When number of bookings is 8 then policy: accept, with value 1052.08
When number of bookings is 9 then policy: accept, with value 1129.94
When number of bookings is 10 then policy: accept, with value 1207.12
When number of bookings is 11 then policy: accept, with value 1283.77
When number of bookings is 12 then policy: accept, with value 1359.90
When number of bookings is 13 then policy: accept, with value 1435.47
When number of bookings is 14 then policy: accept, with value 1510.34
When number of bookings is 15 then policy: accept, with value 1584.35
When number of bookings is 16 then policy: accept, with value 1657.25
When number of bookings is 17 then policy: accept, with value 1728.78
Epochs before flight: 14
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 344.18
When number of bookings is 2 then policy: accept, with value 503.18
When number of bookings is 3 then policy: accept, with value 611.98
When number of bookings is 4 then policy: accept, with value 701.80
When number of bookings is 5 then policy: accept, with value 782.75
When number of bookings is 6 then policy: accept, with value 858.98
When number of bookings is 7 then policy: accept, with value 932.48
When number of bookings is 8 then policy: accept, with value 1004.31
When number of bookings is 9 then policy: accept, with value 1075.05
When number of bookings is 10 then policy: accept, with value 1145.05
When number of bookings is 11 then policy: accept, with value 1214.48
When number of bookings is 12 then policy: accept, with value 1283.44
When number of bookings is 13 then policy: accept, with value 1351.94
When number of bookings is 14 then policy: accept, with value 1419.94
When number of bookings is 15 then policy: accept, with value 1487.37
When number of bookings is 16 then policy: accept, with value 1554.09
Epochs before flight: 15
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 338.38
When number of bookings is 2 then policy: accept, with value 492.88
When number of bookings is 3 then policy: accept, with value 596.94
When number of bookings is 4 then policy: accept, with value 681.63
When number of bookings is 5 then policy: accept, with value 757.09
When number of bookings is 6 then policy: accept, with value 827.54
When number of bookings is 7 then policy: accept, with value 895.03
When number of bookings is 8 then policy: accept, with value 960.67
When number of bookings is 9 then policy: accept, with value 1025.10
When number of bookings is 10 then policy: accept, with value 1088.69
When number of bookings is 11 then policy: accept, with value 1151.67
When number of bookings is 12 then policy: accept, with value 1214.17
When number of bookings is 13 then policy: accept, with value 1276.25
When number of bookings is 14 then policy: accept, with value 1337.93
When number of bookings is 15 then policy: accept, with value 1399.19
Epochs before flight: 16
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 332.35
When number of bookings is 2 then policy: accept, with value 482.56
When number of bookings is 3 then policy: accept, with value 582.31
When number of bookings is 4 then policy: accept, with value 662.42
When number of bookings is 5 then policy: accept, with value 733.01
When number of bookings is 6 then policy: accept, with value 798.35
When number of bookings is 7 then policy: accept, with value 860.52
When number of bookings is 8 then policy: accept, with value 920.69
When number of bookings is 9 then policy: accept, with value 979.52
When number of bookings is 10 then policy: accept, with value 1037.41
When number of bookings is 11 then policy: accept, with value 1094.63
When number of bookings is 12 then policy: accept, with value 1151.34
When number of bookings is 13 then policy: accept, with value 1207.64
When number of bookings is 14 then policy: accept, with value 1263.57
Epochs before flight: 17
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 326.15
When number of bookings is 2 then policy: accept, with value 472.26
When number of bookings is 3 then policy: accept, with value 568.08
When number of bookings is 4 then policy: accept, with value 644.08
When number of bookings is 5 then policy: accept, with value 710.34
When number of bookings is 6 then policy: accept, with value 771.15
When number of bookings is 7 then policy: accept, with value 828.62
When number of bookings is 8 then policy: accept, with value 883.95
When number of bookings is 9 then policy: accept, with value 937.81
When number of bookings is 10 then policy: accept, with value 990.65
When number of bookings is 11 then policy: accept, with value 1042.75
When number of bookings is 12 then policy: accept, with value 1094.29
When number of bookings is 13 then policy: accept, with value 1145.39
Epochs before flight: 18
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 319.84
When number of bookings is 2 then policy: accept, with value 462.02
When number of bookings is 3 then policy: accept, with value 554.22
When number of bookings is 4 then policy: accept, with value 626.52
When number of bookings is 5 then policy: accept, with value 688.93
When number of bookings is 6 then policy: accept, with value 745.72
When number of bookings is 7 then policy: accept, with value 799.03
When number of bookings is 8 then policy: accept, with value 850.06
When number of bookings is 9 then policy: accept, with value 899.53
When number of bookings is 10 then policy: accept, with value 947.89
When number of bookings is 11 then policy: accept, with value 995.43
When number of bookings is 12 then policy: accept, with value 1042.37
Epochs before flight: 19
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 313.45
When number of bookings is 2 then policy: accept, with value 451.86
When number of bookings is 3 then policy: accept, with value 540.72
When number of bookings is 4 then policy: accept, with value 609.68
When number of bookings is 5 then policy: accept, with value 668.64
When number of bookings is 6 then policy: accept, with value 721.86
When number of bookings is 7 then policy: accept, with value 771.48
When number of bookings is 8 then policy: accept, with value 818.71
When number of bookings is 9 then policy: accept, with value 864.29
When number of bookings is 10 then policy: accept, with value 908.67
When number of bookings is 11 then policy: accept, with value 952.18
Epochs before flight: 20
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 307.02
When number of bookings is 2 then policy: accept, with value 441.81
When number of bookings is 3 then policy: accept, with value 527.57
When number of bookings is 4 then policy: accept, with value 593.50
When number of bookings is 5 then policy: accept, with value 649.37
When number of bookings is 6 then policy: accept, with value 699.40
When number of bookings is 7 then policy: accept, with value 745.75
When number of bookings is 8 then policy: accept, with value 789.61
When number of bookings is 9 then policy: accept, with value 831.74
When number of bookings is 10 then policy: accept, with value 872.60
Epochs before flight: 21
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 300.58
When number of bookings is 2 then policy: accept, with value 431.87
When number of bookings is 3 then policy: accept, with value 514.76
When number of bookings is 4 then policy: accept, with value 577.92
When number of bookings is 5 then policy: accept, with value 631.01
When number of bookings is 6 then policy: accept, with value 678.20
When number of bookings is 7 then policy: accept, with value 721.63
When number of bookings is 8 then policy: accept, with value 762.50
When number of bookings is 9 then policy: accept, with value 801.57
Epochs before flight: 22
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 294.15
When number of bookings is 2 then policy: accept, with value 422.08
When number of bookings is 3 then policy: accept, with value 502.27
When number of bookings is 4 then policy: accept, with value 562.90
When number of bookings is 5 then policy: accept, with value 613.47
When number of bookings is 6 then policy: accept, with value 658.12
When number of bookings is 7 then policy: accept, with value 698.95
When number of bookings is 8 then policy: accept, with value 737.16
Epochs before flight: 23
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 287.76
When number of bookings is 2 then policy: accept, with value 412.43
When number of bookings is 3 then policy: accept, with value 490.09
When number of bookings is 4 then policy: accept, with value 548.39
When number of bookings is 5 then policy: accept, with value 596.69
When number of bookings is 6 then policy: accept, with value 639.05
When number of bookings is 7 then policy: accept, with value 677.55
Epochs before flight: 24
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 281.43
When number of bookings is 2 then policy: accept, with value 402.93
When number of bookings is 3 then policy: accept, with value 478.21
When number of bookings is 4 then policy: accept, with value 534.37
When number of bookings is 5 then policy: accept, with value 580.60
When number of bookings is 6 then policy: accept, with value 620.89
Epochs before flight: 25
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 275.15
When number of bookings is 2 then policy: accept, with value 393.60
When number of bookings is 3 then policy: accept, with value 466.63
When number of bookings is 4 then policy: accept, with value 520.80
When number of bookings is 5 then policy: accept, with value 565.13
Epochs before flight: 26
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 268.96
When number of bookings is 2 then policy: accept, with value 384.44
When number of bookings is 3 then policy: accept, with value 455.33
When number of bookings is 4 then policy: accept, with value 507.66
Epochs before flight: 27
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 262.85
When number of bookings is 2 then policy: accept, with value 375.45
When number of bookings is 3 then policy: accept, with value 444.32
Epochs before flight: 28
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 256.83
When number of bookings is 2 then policy: accept, with value 366.64
Epochs before flight: 29
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 250.91
Epochs before flight: 30
When number of bookings is 0 then policy: accept, with value 0.00</code></pre>
</div>
</div>
<div id="910416d9" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> p_cases[<span class="dv">1</span>]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> q_cases[<span class="dv">0</span>]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>title <span class="op">=</span> <span class="ss">f"Optimal values and policies with p=</span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">, q=</span><span class="sc">{</span>q<span class="sc">}</span><span class="ss"> and </span><span class="sc">{</span>n<span class="sc">}</span><span class="ss"> epochs before flight"</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>policy_opt, V_opt <span class="op">=</span> solve_mdp(T, f, S, p, q, r_max, penalty<span class="op">=</span>penalty_func)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>plot_policy(policy_opt, V_opt, n, title)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>print_policy(policy_opt, V_opt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="501a93dc-b66d-4fa7-9780-90f51a974f0a" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("501a93dc-b66d-4fa7-9780-90f51a974f0a")) {                    Plotly.newPlot(                        "501a93dc-b66d-4fa7-9780-90f51a974f0a",                        [{"hovertemplate":"policy=accept\u003cbr\u003er=%{x}\u003cbr\u003eV_star=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"accept","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"accept","orientation":"v","showlegend":true,"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"xaxis":"x","y":[0.0,802.6202148187442,1062.0280932349922,1256.297015390774,1439.152825792747,1618.7935727952076,1795.662678266923,1967.3639330787619,2129.4603963232603,2276.196268088957,2401.7733824652073,2501.822573344225,2574.463074483874,2620.6912752165604,2643.413573288154],"yaxis":"y","type":"scatter"},{"hovertemplate":"policy=reject\u003cbr\u003er=%{x}\u003cbr\u003eV_star=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"reject","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"reject","orientation":"v","showlegend":true,"x":[15,16,17,18,19,20],"xaxis":"x","y":[2648.8846199221357,2631.893004340672,2586.608587312995,2512.8015136902623,2412.9892313077908,2291.261150991917],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"r"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"V_star"}},"legend":{"title":{"text":"policy"},"tracegroupgap":0},"title":{"text":"Optimal values and policies with p=0.3, q=0.05 and 10 epochs before flight"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('501a93dc-b66d-4fa7-9780-90f51a974f0a');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Epochs before flight: 0
Epochs before flight: 1
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 370.50
When number of bookings is 2 then policy: accept, with value 659.78
When number of bookings is 3 then policy: accept, with value 944.99
When number of bookings is 4 then policy: accept, with value 1230.00
When number of bookings is 5 then policy: accept, with value 1515.00
When number of bookings is 6 then policy: accept, with value 1800.00
When number of bookings is 7 then policy: accept, with value 2085.00
When number of bookings is 8 then policy: accept, with value 2370.00
When number of bookings is 9 then policy: accept, with value 2655.00
When number of bookings is 10 then policy: reject, with value 2850.00
When number of bookings is 11 then policy: reject, with value 2793.72
When number of bookings is 12 then policy: reject, with value 2566.80
When number of bookings is 13 then policy: reject, with value 2292.95
When number of bookings is 14 then policy: reject, with value 2009.72
When number of bookings is 15 then policy: reject, with value 1724.97
When number of bookings is 16 then policy: reject, with value 1440.00
When number of bookings is 17 then policy: reject, with value 1155.00
When number of bookings is 18 then policy: reject, with value 870.00
When number of bookings is 19 then policy: reject, with value 585.00
When number of bookings is 20 then policy: reject, with value 300.00
When number of bookings is 21 then policy: reject, with value 15.00
When number of bookings is 22 then policy: reject, with value -270.00
When number of bookings is 23 then policy: reject, with value -555.00
When number of bookings is 24 then policy: reject, with value -840.00
When number of bookings is 25 then policy: reject, with value -1125.00
When number of bookings is 26 then policy: reject, with value -1410.00
When number of bookings is 27 then policy: reject, with value -1695.00
When number of bookings is 28 then policy: reject, with value -1980.00
When number of bookings is 29 then policy: reject, with value -2265.00
Epochs before flight: 2
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 434.42
When number of bookings is 2 then policy: accept, with value 716.11
When number of bookings is 3 then policy: accept, with value 987.68
When number of bookings is 4 then policy: accept, with value 1258.49
When number of bookings is 5 then policy: accept, with value 1529.25
When number of bookings is 6 then policy: accept, with value 1800.00
When number of bookings is 7 then policy: accept, with value 2070.75
When number of bookings is 8 then policy: accept, with value 2341.50
When number of bookings is 9 then policy: accept, with value 2595.23
When number of bookings is 10 then policy: accept, with value 2759.30
When number of bookings is 11 then policy: reject, with value 2793.30
When number of bookings is 12 then policy: reject, with value 2673.25
When number of bookings is 13 then policy: reject, with value 2457.64
When number of bookings is 14 then policy: reject, with value 2203.68
When number of bookings is 15 then policy: reject, with value 1937.39
When number of bookings is 16 then policy: reject, with value 1667.71
When number of bookings is 17 then policy: reject, with value 1397.19
When number of bookings is 18 then policy: reject, with value 1126.49
When number of bookings is 19 then policy: reject, with value 855.75
When number of bookings is 20 then policy: reject, with value 585.00
When number of bookings is 21 then policy: reject, with value 314.25
When number of bookings is 22 then policy: reject, with value 43.50
When number of bookings is 23 then policy: reject, with value -227.25
When number of bookings is 24 then policy: reject, with value -498.00
When number of bookings is 25 then policy: reject, with value -768.75
When number of bookings is 26 then policy: reject, with value -1039.50
When number of bookings is 27 then policy: reject, with value -1310.25
When number of bookings is 28 then policy: reject, with value -1581.00
Epochs before flight: 3
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 492.98
When number of bookings is 2 then policy: accept, with value 769.11
When number of bookings is 3 then policy: accept, with value 1028.14
When number of bookings is 4 then policy: accept, with value 1285.55
When number of bookings is 5 then policy: accept, with value 1542.78
When number of bookings is 6 then policy: accept, with value 1800.00
When number of bookings is 7 then policy: accept, with value 2057.21
When number of bookings is 8 then policy: accept, with value 2311.04
When number of bookings is 9 then policy: accept, with value 2539.22
When number of bookings is 10 then policy: accept, with value 2696.43
When number of bookings is 11 then policy: reject, with value 2757.61
When number of bookings is 12 then policy: reject, with value 2720.58
When number of bookings is 13 then policy: reject, with value 2577.41
When number of bookings is 14 then policy: reject, with value 2370.17
When number of bookings is 15 then policy: reject, with value 2132.16
When number of bookings is 16 then policy: reject, with value 1881.60
When number of bookings is 17 then policy: reject, with value 1626.51
When number of bookings is 18 then policy: reject, with value 1369.93
When number of bookings is 19 then policy: reject, with value 1112.90
When number of bookings is 20 then policy: reject, with value 855.73
When number of bookings is 21 then policy: reject, with value 598.53
When number of bookings is 22 then policy: reject, with value 341.32
When number of bookings is 23 then policy: reject, with value 84.11
When number of bookings is 24 then policy: reject, with value -173.10
When number of bookings is 25 then policy: reject, with value -430.31
When number of bookings is 26 then policy: reject, with value -687.53
When number of bookings is 27 then policy: reject, with value -944.74
Epochs before flight: 4
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 547.03
When number of bookings is 2 then policy: accept, with value 818.96
When number of bookings is 3 then policy: accept, with value 1066.45
When number of bookings is 4 then policy: accept, with value 1311.22
When number of bookings is 5 then policy: accept, with value 1555.64
When number of bookings is 6 then policy: accept, with value 1800.00
When number of bookings is 7 then policy: accept, with value 2043.64
When number of bookings is 8 then policy: accept, with value 2280.39
When number of bookings is 9 then policy: accept, with value 2490.04
When number of bookings is 10 then policy: accept, with value 2642.33
When number of bookings is 11 then policy: accept, with value 2716.18
When number of bookings is 12 then policy: reject, with value 2726.72
When number of bookings is 13 then policy: reject, with value 2650.04
When number of bookings is 14 then policy: reject, with value 2499.03
When number of bookings is 15 then policy: reject, with value 2300.67
When number of bookings is 16 then policy: reject, with value 2076.85
When number of bookings is 17 then policy: reject, with value 1840.96
When number of bookings is 18 then policy: reject, with value 1599.87
When number of bookings is 19 then policy: reject, with value 1356.70
When number of bookings is 20 then policy: reject, with value 1112.76
When number of bookings is 21 then policy: reject, with value 868.55
When number of bookings is 22 then policy: reject, with value 624.24
When number of bookings is 23 then policy: reject, with value 379.90
When number of bookings is 24 then policy: reject, with value 135.55
When number of bookings is 25 then policy: reject, with value -108.80
When number of bookings is 26 then policy: reject, with value -353.15
Epochs before flight: 5
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 597.18
When number of bookings is 2 then policy: accept, with value 865.84
When number of bookings is 3 then policy: accept, with value 1102.70
When number of bookings is 4 then policy: accept, with value 1335.57
When number of bookings is 5 then policy: accept, with value 1567.84
When number of bookings is 6 then policy: accept, with value 1799.84
When number of bookings is 7 then policy: accept, with value 2029.99
When number of bookings is 8 then policy: accept, with value 2251.00
When number of bookings is 9 then policy: accept, with value 2446.11
When number of bookings is 10 then policy: accept, with value 2593.35
When number of bookings is 11 then policy: accept, with value 2679.25
When number of bookings is 12 then policy: reject, with value 2709.64
When number of bookings is 13 then policy: reject, with value 2683.58
When number of bookings is 14 then policy: reject, with value 2587.43
When number of bookings is 15 then policy: reject, with value 2435.61
When number of bookings is 16 then policy: reject, with value 2246.70
When number of bookings is 17 then policy: reject, with value 2036.11
When number of bookings is 18 then policy: reject, with value 1814.03
When number of bookings is 19 then policy: reject, with value 1586.34
When number of bookings is 20 then policy: reject, with value 1356.08
When number of bookings is 21 then policy: reject, with value 1124.71
When number of bookings is 22 then policy: reject, with value 892.87
When number of bookings is 23 then policy: reject, with value 660.85
When number of bookings is 24 then policy: reject, with value 428.75
When number of bookings is 25 then policy: reject, with value 196.64
Epochs before flight: 6
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 643.89
When number of bookings is 2 then policy: accept, with value 909.94
When number of bookings is 3 then policy: accept, with value 1136.99
When number of bookings is 4 then policy: accept, with value 1358.66
When number of bookings is 5 then policy: accept, with value 1579.37
When number of bookings is 6 then policy: accept, with value 1799.42
When number of bookings is 7 then policy: accept, with value 2016.50
When number of bookings is 8 then policy: accept, with value 2223.31
When number of bookings is 9 then policy: accept, with value 2406.21
When number of bookings is 10 then policy: accept, with value 2549.15
When number of bookings is 11 then policy: accept, with value 2642.27
When number of bookings is 12 then policy: accept, with value 2684.47
When number of bookings is 13 then policy: reject, with value 2689.52
When number of bookings is 14 then policy: reject, with value 2639.33
When number of bookings is 15 then policy: reject, with value 2534.24
When number of bookings is 16 then policy: reject, with value 2385.47
When number of bookings is 17 then policy: reject, with value 2206.40
When number of bookings is 18 then policy: reject, with value 2008.37
When number of bookings is 19 then policy: reject, with value 1799.43
When number of bookings is 20 then policy: reject, with value 1584.60
When number of bookings is 21 then policy: reject, with value 1366.76
When number of bookings is 22 then policy: reject, with value 1147.46
When number of bookings is 23 then policy: reject, with value 927.47
When number of bookings is 24 then policy: reject, with value 707.17
Epochs before flight: 7
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 687.52
When number of bookings is 2 then policy: accept, with value 951.44
When number of bookings is 3 then policy: accept, with value 1169.40
When number of bookings is 4 then policy: accept, with value 1380.52
When number of bookings is 5 then policy: accept, with value 1590.23
When number of bookings is 6 then policy: accept, with value 1798.75
When number of bookings is 7 then policy: accept, with value 2003.39
When number of bookings is 8 then policy: accept, with value 2197.38
When number of bookings is 9 then policy: accept, with value 2369.74
When number of bookings is 10 then policy: accept, with value 2508.47
When number of bookings is 11 then policy: accept, with value 2605.38
When number of bookings is 12 then policy: accept, with value 2659.57
When number of bookings is 13 then policy: reject, with value 2678.57
When number of bookings is 14 then policy: reject, with value 2662.55
When number of bookings is 15 then policy: reject, with value 2598.75
When number of bookings is 16 then policy: reject, with value 2490.73
When number of bookings is 17 then policy: reject, with value 2347.22
When number of bookings is 18 then policy: reject, with value 2178.16
When number of bookings is 19 then policy: reject, with value 1992.21
When number of bookings is 20 then policy: reject, with value 1795.82
When number of bookings is 21 then policy: reject, with value 1593.35
When number of bookings is 22 then policy: reject, with value 1387.48
When number of bookings is 23 then policy: reject, with value 1179.80
Epochs before flight: 8
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 728.36
When number of bookings is 2 then policy: accept, with value 990.53
When number of bookings is 3 then policy: accept, with value 1200.03
When number of bookings is 4 then policy: accept, with value 1401.20
When number of bookings is 5 then policy: accept, with value 1600.41
When number of bookings is 6 then policy: accept, with value 1797.86
When number of bookings is 7 then policy: accept, with value 1990.79
When number of bookings is 8 then policy: accept, with value 2173.17
When number of bookings is 9 then policy: accept, with value 2336.18
When number of bookings is 10 then policy: accept, with value 2470.56
When number of bookings is 11 then policy: accept, with value 2569.73
When number of bookings is 12 then policy: accept, with value 2632.39
When number of bookings is 13 then policy: accept, with value 2661.22
When number of bookings is 14 then policy: reject, with value 2665.75
When number of bookings is 15 then policy: reject, with value 2634.68
When number of bookings is 16 then policy: reject, with value 2563.78
When number of bookings is 17 then policy: reject, with value 2456.49
When number of bookings is 18 then policy: reject, with value 2319.56
When number of bookings is 19 then policy: reject, with value 2160.57
When number of bookings is 20 then policy: reject, with value 1986.27
When number of bookings is 21 then policy: reject, with value 1801.95
When number of bookings is 22 then policy: reject, with value 1611.38
Epochs before flight: 9
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 766.66
When number of bookings is 2 then policy: accept, with value 1027.34
When number of bookings is 3 then policy: accept, with value 1228.97
When number of bookings is 4 then policy: accept, with value 1420.73
When number of bookings is 5 then policy: accept, with value 1609.92
When number of bookings is 6 then policy: accept, with value 1796.82
When number of bookings is 7 then policy: accept, with value 1978.77
When number of bookings is 8 then policy: accept, with value 2150.57
When number of bookings is 9 then policy: accept, with value 2305.10
When number of bookings is 10 then policy: accept, with value 2435.09
When number of bookings is 11 then policy: accept, with value 2535.22
When number of bookings is 12 then policy: accept, with value 2603.66
When number of bookings is 13 then policy: accept, with value 2642.39
When number of bookings is 14 then policy: reject, with value 2656.66
When number of bookings is 15 then policy: reject, with value 2649.13
When number of bookings is 16 then policy: reject, with value 2608.89
When number of bookings is 17 then policy: reject, with value 2535.13
When number of bookings is 18 then policy: reject, with value 2430.84
When number of bookings is 19 then policy: reject, with value 2301.29
When number of bookings is 20 then policy: reject, with value 2152.32
When number of bookings is 21 then policy: reject, with value 1989.30
Epochs before flight: 10
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 802.62
When number of bookings is 2 then policy: accept, with value 1062.03
When number of bookings is 3 then policy: accept, with value 1256.30
When number of bookings is 4 then policy: accept, with value 1439.15
When number of bookings is 5 then policy: accept, with value 1618.79
When number of bookings is 6 then policy: accept, with value 1795.66
When number of bookings is 7 then policy: accept, with value 1967.36
When number of bookings is 8 then policy: accept, with value 2129.46
When number of bookings is 9 then policy: accept, with value 2276.20
When number of bookings is 10 then policy: accept, with value 2401.77
When number of bookings is 11 then policy: accept, with value 2501.82
When number of bookings is 12 then policy: accept, with value 2574.46
When number of bookings is 13 then policy: accept, with value 2620.69
When number of bookings is 14 then policy: accept, with value 2643.41
When number of bookings is 15 then policy: reject, with value 2648.88
When number of bookings is 16 then policy: reject, with value 2631.89
When number of bookings is 17 then policy: reject, with value 2586.61
When number of bookings is 18 then policy: reject, with value 2512.80
When number of bookings is 19 then policy: reject, with value 2412.99
When number of bookings is 20 then policy: reject, with value 2291.26
Epochs before flight: 11
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 836.42
When number of bookings is 2 then policy: accept, with value 1094.72
When number of bookings is 3 then policy: accept, with value 1282.09
When number of bookings is 4 then policy: accept, with value 1456.51
When number of bookings is 5 then policy: accept, with value 1627.07
When number of bookings is 6 then policy: accept, with value 1794.45
When number of bookings is 7 then policy: accept, with value 1956.58
When number of bookings is 8 then policy: accept, with value 2109.73
When number of bookings is 9 then policy: accept, with value 2249.22
When number of bookings is 10 then policy: accept, with value 2370.38
When number of bookings is 11 then policy: accept, with value 2469.60
When number of bookings is 12 then policy: accept, with value 2545.06
When number of bookings is 13 then policy: accept, with value 2597.02
When number of bookings is 14 then policy: accept, with value 2627.69
When number of bookings is 15 then policy: reject, with value 2639.92
When number of bookings is 16 then policy: reject, with value 2639.00
When number of bookings is 17 then policy: reject, with value 2615.95
When number of bookings is 18 then policy: reject, with value 2568.43
When number of bookings is 19 then policy: reject, with value 2496.46
Epochs before flight: 12
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 868.22
When number of bookings is 2 then policy: accept, with value 1125.54
When number of bookings is 3 then policy: accept, with value 1306.41
When number of bookings is 4 then policy: accept, with value 1472.84
When number of bookings is 5 then policy: accept, with value 1634.78
When number of bookings is 6 then policy: accept, with value 1793.20
When number of bookings is 7 then policy: accept, with value 1946.40
When number of bookings is 8 then policy: accept, with value 2091.25
When number of bookings is 9 then policy: accept, with value 2223.96
When number of bookings is 10 then policy: accept, with value 2340.74
When number of bookings is 11 then policy: accept, with value 2438.56
When number of bookings is 12 then policy: accept, with value 2515.73
When number of bookings is 13 then policy: accept, with value 2572.12
When number of bookings is 14 then policy: accept, with value 2609.01
When number of bookings is 15 then policy: accept, with value 2628.81
When number of bookings is 16 then policy: reject, with value 2635.45
When number of bookings is 17 then policy: reject, with value 2628.60
When number of bookings is 18 then policy: reject, with value 2602.16
Epochs before flight: 13
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 898.14
When number of bookings is 2 then policy: accept, with value 1154.58
When number of bookings is 3 then policy: accept, with value 1329.34
When number of bookings is 4 then policy: accept, with value 1488.21
When number of bookings is 5 then policy: accept, with value 1641.97
When number of bookings is 6 then policy: accept, with value 1791.95
When number of bookings is 7 then policy: accept, with value 1936.80
When number of bookings is 8 then policy: accept, with value 2073.94
When number of bookings is 9 then policy: accept, with value 2200.27
When number of bookings is 10 then policy: accept, with value 2312.70
When number of bookings is 11 then policy: accept, with value 2408.70
When number of bookings is 12 then policy: accept, with value 2486.71
When number of bookings is 13 then policy: accept, with value 2546.36
When number of bookings is 14 then policy: accept, with value 2588.38
When number of bookings is 15 then policy: accept, with value 2614.59
When number of bookings is 16 then policy: accept, with value 2627.16
When number of bookings is 17 then policy: reject, with value 2629.81
Epochs before flight: 14
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 926.32
When number of bookings is 2 then policy: accept, with value 1181.96
When number of bookings is 3 then policy: accept, with value 1350.95
When number of bookings is 4 then policy: accept, with value 1502.65
When number of bookings is 5 then policy: accept, with value 1648.68
When number of bookings is 6 then policy: accept, with value 1790.71
When number of bookings is 7 then policy: accept, with value 1927.75
When number of bookings is 8 then policy: accept, with value 2057.69
When number of bookings is 9 then policy: accept, with value 2178.00
When number of bookings is 10 then policy: accept, with value 2286.14
When number of bookings is 11 then policy: accept, with value 2380.00
When number of bookings is 12 then policy: accept, with value 2458.15
When number of bookings is 13 then policy: accept, with value 2520.10
When number of bookings is 14 then policy: accept, with value 2566.22
When number of bookings is 15 then policy: accept, with value 2597.69
When number of bookings is 16 then policy: accept, with value 2616.35
Epochs before flight: 15
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 952.86
When number of bookings is 2 then policy: accept, with value 1207.76
When number of bookings is 3 then policy: accept, with value 1371.31
When number of bookings is 4 then policy: accept, with value 1516.22
When number of bookings is 5 then policy: accept, with value 1654.94
When number of bookings is 6 then policy: accept, with value 1789.50
When number of bookings is 7 then policy: accept, with value 1919.22
When number of bookings is 8 then policy: accept, with value 2042.43
When number of bookings is 9 then policy: accept, with value 2157.04
When number of bookings is 10 then policy: accept, with value 2260.97
When number of bookings is 11 then policy: accept, with value 2352.43
When number of bookings is 12 then policy: accept, with value 2430.18
When number of bookings is 13 then policy: accept, with value 2493.63
When number of bookings is 14 then policy: accept, with value 2542.91
When number of bookings is 15 then policy: accept, with value 2578.80
Epochs before flight: 16
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 977.86
When number of bookings is 2 then policy: accept, with value 1232.07
When number of bookings is 3 then policy: accept, with value 1390.48
When number of bookings is 4 then policy: accept, with value 1528.97
When number of bookings is 5 then policy: accept, with value 1660.79
When number of bookings is 6 then policy: accept, with value 1788.32
When number of bookings is 7 then policy: accept, with value 1911.19
When number of bookings is 8 then policy: accept, with value 2028.07
When number of bookings is 9 then policy: accept, with value 2137.28
When number of bookings is 10 then policy: accept, with value 2237.08
When number of bookings is 11 then policy: accept, with value 2325.98
When number of bookings is 12 then policy: accept, with value 2402.88
When number of bookings is 13 then policy: accept, with value 2467.17
When number of bookings is 14 then policy: accept, with value 2518.81
Epochs before flight: 17
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1001.42
When number of bookings is 2 then policy: accept, with value 1254.97
When number of bookings is 3 then policy: accept, with value 1408.52
When number of bookings is 4 then policy: accept, with value 1540.95
When number of bookings is 5 then policy: accept, with value 1666.25
When number of bookings is 6 then policy: accept, with value 1787.17
When number of bookings is 7 then policy: accept, with value 1903.62
When number of bookings is 8 then policy: accept, with value 2014.56
When number of bookings is 9 then policy: accept, with value 2118.63
When number of bookings is 10 then policy: accept, with value 2214.40
When number of bookings is 11 then policy: accept, with value 2300.62
When number of bookings is 12 then policy: accept, with value 2376.31
When number of bookings is 13 then policy: accept, with value 2440.90
Epochs before flight: 18
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1023.61
When number of bookings is 2 then policy: accept, with value 1276.55
When number of bookings is 3 then policy: accept, with value 1425.50
When number of bookings is 4 then policy: accept, with value 1552.19
When number of bookings is 5 then policy: accept, with value 1671.36
When number of bookings is 6 then policy: accept, with value 1786.06
When number of bookings is 7 then policy: accept, with value 1896.47
When number of bookings is 8 then policy: accept, with value 2001.82
When number of bookings is 9 then policy: accept, with value 2101.00
When number of bookings is 10 then policy: accept, with value 2192.86
When number of bookings is 11 then policy: accept, with value 2276.32
When number of bookings is 12 then policy: accept, with value 2350.53
Epochs before flight: 19
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1044.52
When number of bookings is 2 then policy: accept, with value 1296.86
When number of bookings is 3 then policy: accept, with value 1441.47
When number of bookings is 4 then policy: accept, with value 1562.75
When number of bookings is 5 then policy: accept, with value 1676.13
When number of bookings is 6 then policy: accept, with value 1784.99
When number of bookings is 7 then policy: accept, with value 1889.73
When number of bookings is 8 then policy: accept, with value 1989.80
When number of bookings is 9 then policy: accept, with value 2084.34
When number of bookings is 10 then policy: accept, with value 2172.38
When number of bookings is 11 then policy: accept, with value 2253.04
Epochs before flight: 20
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1064.21
When number of bookings is 2 then policy: accept, with value 1315.99
When number of bookings is 3 then policy: accept, with value 1456.49
When number of bookings is 4 then policy: accept, with value 1572.67
When number of bookings is 5 then policy: accept, with value 1680.59
When number of bookings is 6 then policy: accept, with value 1783.95
When number of bookings is 7 then policy: accept, with value 1883.35
When number of bookings is 8 then policy: accept, with value 1978.46
When number of bookings is 9 then policy: accept, with value 2068.57
When number of bookings is 10 then policy: accept, with value 2152.92
Epochs before flight: 21
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1082.76
When number of bookings is 2 then policy: accept, with value 1334.00
When number of bookings is 3 then policy: accept, with value 1470.62
When number of bookings is 4 then policy: accept, with value 1581.97
When number of bookings is 5 then policy: accept, with value 1684.76
When number of bookings is 6 then policy: accept, with value 1782.95
When number of bookings is 7 then policy: accept, with value 1877.33
When number of bookings is 8 then policy: accept, with value 1967.74
When number of bookings is 9 then policy: accept, with value 2053.64
Epochs before flight: 22
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1100.22
When number of bookings is 2 then policy: accept, with value 1350.95
When number of bookings is 3 then policy: accept, with value 1483.90
When number of bookings is 4 then policy: accept, with value 1590.71
When number of bookings is 5 then policy: accept, with value 1688.66
When number of bookings is 6 then policy: accept, with value 1781.98
When number of bookings is 7 then policy: accept, with value 1871.63
When number of bookings is 8 then policy: accept, with value 1957.60
Epochs before flight: 23
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1116.67
When number of bookings is 2 then policy: accept, with value 1366.89
When number of bookings is 3 then policy: accept, with value 1496.39
When number of bookings is 4 then policy: accept, with value 1598.91
When number of bookings is 5 then policy: accept, with value 1692.31
When number of bookings is 6 then policy: accept, with value 1781.04
When number of bookings is 7 then policy: accept, with value 1866.23
Epochs before flight: 24
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1132.15
When number of bookings is 2 then policy: accept, with value 1381.90
When number of bookings is 3 then policy: accept, with value 1508.13
When number of bookings is 4 then policy: accept, with value 1606.61
When number of bookings is 5 then policy: accept, with value 1695.71
When number of bookings is 6 then policy: accept, with value 1780.12
Epochs before flight: 25
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1146.72
When number of bookings is 2 then policy: accept, with value 1396.01
When number of bookings is 3 then policy: accept, with value 1519.17
When number of bookings is 4 then policy: accept, with value 1613.83
When number of bookings is 5 then policy: accept, with value 1698.89
Epochs before flight: 26
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1160.43
When number of bookings is 2 then policy: accept, with value 1409.29
When number of bookings is 3 then policy: accept, with value 1529.54
When number of bookings is 4 then policy: accept, with value 1620.61
Epochs before flight: 27
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1173.34
When number of bookings is 2 then policy: accept, with value 1421.77
When number of bookings is 3 then policy: accept, with value 1539.28
Epochs before flight: 28
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1185.47
When number of bookings is 2 then policy: accept, with value 1433.51
Epochs before flight: 29
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 1196.89
Epochs before flight: 30
When number of bookings is 0 then policy: accept, with value 0.00</code></pre>
</div>
</div>
<div id="56b2c707" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> p_cases[<span class="dv">1</span>]</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> q_cases[<span class="dv">1</span>]</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>title <span class="op">=</span> <span class="ss">f"Optimal values and policies with p=</span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">, q=</span><span class="sc">{</span>q<span class="sc">}</span><span class="ss"> and </span><span class="sc">{</span>n<span class="sc">}</span><span class="ss"> epochs before flight"</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>policy_opt, V_opt <span class="op">=</span> solve_mdp(T, f, S, p, q, r_max, penalty<span class="op">=</span>penalty_func)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>plot_policy(policy_opt, V_opt, n, title)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>print_policy(policy_opt, V_opt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="2d6108fe-facf-4778-af48-6bea7a830fd2" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("2d6108fe-facf-4778-af48-6bea7a830fd2")) {                    Plotly.newPlot(                        "2d6108fe-facf-4778-af48-6bea7a830fd2",                        [{"hovertemplate":"policy=accept\u003cbr\u003er=%{x}\u003cbr\u003eV_star=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"accept","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"accept","orientation":"v","showlegend":true,"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"xaxis":"x","y":[0.0,521.8394884597442,730.5343628904686,870.5525889849955,989.8860135980243,1101.3726172253512,1209.3710846718775,1315.5610237665444,1420.5556221006034,1524.4320504644497,1626.926372767847,1727.5177172783065,1825.4813457802172,1919.9404882936085,2009.9260839841816,2094.4436517903882,2172.541905413643,2243.3766296087333,2306.2596619331093,2360.336488249464],"yaxis":"y","type":"scatter"},{"hovertemplate":"policy=reject\u003cbr\u003er=%{x}\u003cbr\u003eV_star=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"reject","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"reject","orientation":"v","showlegend":true,"x":[20],"xaxis":"x","y":[2392.052301986013],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"r"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"V_star"}},"legend":{"title":{"text":"policy"},"tracegroupgap":0},"title":{"text":"Optimal values and policies with p=0.3, q=0.1 and 10 epochs before flight"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('2d6108fe-facf-4778-af48-6bea7a830fd2');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Epochs before flight: 0
Epochs before flight: 1
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 351.00
When number of bookings is 2 then policy: accept, with value 629.10
When number of bookings is 3 then policy: accept, with value 899.91
When number of bookings is 4 then policy: accept, with value 1169.99
When number of bookings is 5 then policy: accept, with value 1440.00
When number of bookings is 6 then policy: accept, with value 1710.00
When number of bookings is 7 then policy: accept, with value 1980.00
When number of bookings is 8 then policy: accept, with value 2250.00
When number of bookings is 9 then policy: accept, with value 2520.00
When number of bookings is 10 then policy: accept, with value 2727.24
When number of bookings is 11 then policy: reject, with value 2781.71
When number of bookings is 12 then policy: reject, with value 2675.14
When number of bookings is 13 then policy: reject, with value 2465.01
When number of bookings is 14 then policy: reject, with value 2213.46
When number of bookings is 15 then policy: reject, with value 1948.44
When number of bookings is 16 then policy: reject, with value 1679.66
When number of bookings is 17 then policy: reject, with value 1409.93
When number of bookings is 18 then policy: reject, with value 1139.99
When number of bookings is 19 then policy: reject, with value 870.00
When number of bookings is 20 then policy: reject, with value 600.00
When number of bookings is 21 then policy: reject, with value 330.00
When number of bookings is 22 then policy: reject, with value 60.00
When number of bookings is 23 then policy: reject, with value -210.00
When number of bookings is 24 then policy: reject, with value -480.00
When number of bookings is 25 then policy: reject, with value -750.00
When number of bookings is 26 then policy: reject, with value -1020.00
When number of bookings is 27 then policy: reject, with value -1290.00
When number of bookings is 28 then policy: reject, with value -1560.00
When number of bookings is 29 then policy: reject, with value -1830.00
Epochs before flight: 2
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 390.99
When number of bookings is 2 then policy: accept, with value 653.58
When number of bookings is 3 then policy: accept, with value 899.44
When number of bookings is 4 then policy: accept, with value 1142.90
When number of bookings is 5 then policy: accept, with value 1385.98
When number of bookings is 6 then policy: accept, with value 1629.00
When number of bookings is 7 then policy: accept, with value 1872.00
When number of bookings is 8 then policy: accept, with value 2115.00
When number of bookings is 9 then policy: accept, with value 2350.71
When number of bookings is 10 then policy: accept, with value 2549.28
When number of bookings is 11 then policy: accept, with value 2668.34
When number of bookings is 12 then policy: reject, with value 2701.81
When number of bookings is 13 then policy: reject, with value 2645.69
When number of bookings is 14 then policy: reject, with value 2506.85
When number of bookings is 15 then policy: reject, with value 2315.68
When number of bookings is 16 then policy: reject, with value 2096.14
When number of bookings is 17 then policy: reject, with value 1862.96
When number of bookings is 18 then policy: reject, with value 1623.81
When number of bookings is 19 then policy: reject, with value 1382.24
When number of bookings is 20 then policy: reject, with value 1139.75
When number of bookings is 21 then policy: reject, with value 896.92
When number of bookings is 22 then policy: reject, with value 653.97
When number of bookings is 23 then policy: reject, with value 410.99
When number of bookings is 24 then policy: reject, with value 168.00
When number of bookings is 25 then policy: reject, with value -75.00
When number of bookings is 26 then policy: reject, with value -318.00
When number of bookings is 27 then policy: reject, with value -561.00
When number of bookings is 28 then policy: reject, with value -804.00
Epochs before flight: 3
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 422.79
When number of bookings is 2 then policy: accept, with value 673.70
When number of bookings is 3 then policy: accept, with value 898.37
When number of bookings is 4 then policy: accept, with value 1118.32
When number of bookings is 5 then policy: accept, with value 1337.31
When number of bookings is 6 then policy: accept, with value 1556.08
When number of bookings is 7 then policy: accept, with value 1774.79
When number of bookings is 8 then policy: accept, with value 1992.56
When number of bookings is 9 then policy: accept, with value 2203.36
When number of bookings is 10 then policy: accept, with value 2391.49
When number of bookings is 11 then policy: accept, with value 2536.10
When number of bookings is 12 then policy: accept, with value 2622.08
When number of bookings is 13 then policy: reject, with value 2650.37
When number of bookings is 14 then policy: reject, with value 2624.45
When number of bookings is 15 then policy: reject, with value 2536.53
When number of bookings is 16 then policy: reject, with value 2399.79
When number of bookings is 17 then policy: reject, with value 2229.00
When number of bookings is 18 then policy: reject, with value 2036.67
When number of bookings is 19 then policy: reject, with value 1831.75
When number of bookings is 20 then policy: reject, with value 1619.94
When number of bookings is 21 then policy: reject, with value 1404.55
When number of bookings is 22 then policy: reject, with value 1187.39
When number of bookings is 23 then policy: reject, with value 969.38
When number of bookings is 24 then policy: reject, with value 750.98
When number of bookings is 25 then policy: reject, with value 532.41
When number of bookings is 26 then policy: reject, with value 313.76
When number of bookings is 27 then policy: reject, with value 95.09
Epochs before flight: 4
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 448.25
When number of bookings is 2 then policy: accept, with value 689.94
When number of bookings is 3 then policy: accept, with value 896.55
When number of bookings is 4 then policy: accept, with value 1095.85
When number of bookings is 5 then policy: accept, with value 1293.37
When number of bookings is 6 then policy: accept, with value 1490.40
When number of bookings is 7 then policy: accept, with value 1687.16
When number of bookings is 8 then policy: accept, with value 1882.61
When number of bookings is 9 then policy: accept, with value 2072.67
When number of bookings is 10 then policy: accept, with value 2248.68
When number of bookings is 11 then policy: accept, with value 2398.81
When number of bookings is 12 then policy: accept, with value 2512.27
When number of bookings is 13 then policy: accept, with value 2583.10
When number of bookings is 14 then policy: reject, with value 2610.60
When number of bookings is 15 then policy: reject, with value 2605.72
When number of bookings is 16 then policy: reject, with value 2555.34
When number of bookings is 17 then policy: reject, with value 2464.09
When number of bookings is 18 then policy: reject, with value 2339.47
When number of bookings is 19 then policy: reject, with value 2189.76
When number of bookings is 20 then policy: reject, with value 2022.42
When number of bookings is 21 then policy: reject, with value 1843.39
When number of bookings is 22 then policy: reject, with value 1656.95
When number of bookings is 23 then policy: reject, with value 1466.01
When number of bookings is 24 then policy: reject, with value 1272.43
When number of bookings is 25 then policy: reject, with value 1077.36
When number of bookings is 26 then policy: reject, with value 881.46
Epochs before flight: 5
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 468.68
When number of bookings is 2 then policy: accept, with value 702.79
When number of bookings is 3 then policy: accept, with value 893.95
When number of bookings is 4 then policy: accept, with value 1075.15
When number of bookings is 5 then policy: accept, with value 1253.60
When number of bookings is 6 then policy: accept, with value 1431.17
When number of bookings is 7 then policy: accept, with value 1608.21
When number of bookings is 8 then policy: accept, with value 1783.95
When number of bookings is 9 then policy: accept, with value 1955.75
When number of bookings is 10 then policy: accept, with value 2118.62
When number of bookings is 11 then policy: accept, with value 2265.62
When number of bookings is 12 then policy: accept, with value 2389.46
When number of bookings is 13 then policy: accept, with value 2484.32
When number of bookings is 14 then policy: accept, with value 2547.45
When number of bookings is 15 then policy: accept, with value 2578.85
When number of bookings is 16 then policy: reject, with value 2585.59
When number of bookings is 17 then policy: reject, with value 2562.88
When number of bookings is 18 then policy: reject, with value 2508.04
When number of bookings is 19 then policy: reject, with value 2423.94
When number of bookings is 20 then policy: reject, with value 2315.00
When number of bookings is 21 then policy: reject, with value 2186.19
When number of bookings is 22 then policy: reject, with value 2042.28
When number of bookings is 23 then policy: reject, with value 1887.37
When number of bookings is 24 then policy: reject, with value 1724.74
When number of bookings is 25 then policy: reject, with value 1556.85
Epochs before flight: 6
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 485.03
When number of bookings is 2 then policy: accept, with value 712.72
When number of bookings is 3 then policy: accept, with value 890.58
When number of bookings is 4 then policy: accept, with value 1055.94
When number of bookings is 5 then policy: accept, with value 1217.49
When number of bookings is 6 then policy: accept, with value 1377.68
When number of bookings is 7 then policy: accept, with value 1537.11
When number of bookings is 8 then policy: accept, with value 1695.32
When number of bookings is 9 then policy: accept, with value 1850.70
When number of bookings is 10 then policy: accept, with value 2000.28
When number of bookings is 11 then policy: accept, with value 2139.89
When number of bookings is 12 then policy: accept, with value 2264.81
When number of bookings is 13 then policy: accept, with value 2370.59
When number of bookings is 14 then policy: accept, with value 2453.92
When number of bookings is 15 then policy: accept, with value 2513.34
When number of bookings is 16 then policy: accept, with value 2549.19
When number of bookings is 17 then policy: reject, with value 2562.80
When number of bookings is 18 then policy: reject, with value 2559.69
When number of bookings is 19 then policy: reject, with value 2532.54
When number of bookings is 20 then policy: reject, with value 2481.74
When number of bookings is 21 then policy: reject, with value 2408.95
When number of bookings is 22 then policy: reject, with value 2316.74
When number of bookings is 23 then policy: reject, with value 2208.17
When number of bookings is 24 then policy: reject, with value 2086.34
Epochs before flight: 7
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 498.00
When number of bookings is 2 then policy: accept, with value 720.12
When number of bookings is 3 then policy: accept, with value 886.49
When number of bookings is 4 then policy: accept, with value 1037.98
When number of bookings is 5 then policy: accept, with value 1184.59
When number of bookings is 6 then policy: accept, with value 1329.31
When number of bookings is 7 then policy: accept, with value 1473.02
When number of bookings is 8 then policy: accept, with value 1615.61
When number of bookings is 9 then policy: accept, with value 1756.11
When number of bookings is 10 then policy: accept, with value 1892.77
When number of bookings is 11 then policy: accept, with value 2023.06
When number of bookings is 12 then policy: accept, with value 2143.96
When number of bookings is 13 then policy: accept, with value 2252.33
When number of bookings is 14 then policy: accept, with value 2345.42
When number of bookings is 15 then policy: accept, with value 2421.22
When number of bookings is 16 then policy: accept, with value 2478.71
When number of bookings is 17 then policy: accept, with value 2517.95
When number of bookings is 18 then policy: accept, with value 2539.74
When number of bookings is 19 then policy: reject, with value 2546.67
When number of bookings is 20 then policy: reject, with value 2539.61
When number of bookings is 21 then policy: reject, with value 2514.58
When number of bookings is 22 then policy: reject, with value 2471.66
When number of bookings is 23 then policy: reject, with value 2411.68
Epochs before flight: 8
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 508.17
When number of bookings is 2 then policy: accept, with value 725.36
When number of bookings is 3 then policy: accept, with value 881.75
When number of bookings is 4 then policy: accept, with value 1021.09
When number of bookings is 5 then policy: accept, with value 1154.49
When number of bookings is 6 then policy: accept, with value 1285.47
When number of bookings is 7 then policy: accept, with value 1415.19
When number of bookings is 8 then policy: accept, with value 1543.81
When number of bookings is 9 then policy: accept, with value 1670.85
When number of bookings is 10 then policy: accept, with value 1795.26
When number of bookings is 11 then policy: accept, with value 1915.53
When number of bookings is 12 then policy: accept, with value 2029.73
When number of bookings is 13 then policy: accept, with value 2135.78
When number of bookings is 14 then policy: accept, with value 2231.60
When number of bookings is 15 then policy: accept, with value 2315.41
When number of bookings is 16 then policy: accept, with value 2385.87
When number of bookings is 17 then policy: accept, with value 2442.23
When number of bookings is 18 then policy: accept, with value 2484.34
When number of bookings is 19 then policy: accept, with value 2512.70
When number of bookings is 20 then policy: reject, with value 2525.73
When number of bookings is 21 then policy: reject, with value 2532.41
When number of bookings is 22 then policy: reject, with value 2525.98
Epochs before flight: 9
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 516.00
When number of bookings is 2 then policy: accept, with value 728.75
When number of bookings is 3 then policy: accept, with value 876.41
When number of bookings is 4 then policy: accept, with value 1005.10
When number of bookings is 5 then policy: accept, with value 1126.86
When number of bookings is 6 then policy: accept, with value 1245.65
When number of bookings is 7 then policy: accept, with value 1362.91
When number of bookings is 8 then policy: accept, with value 1479.05
When number of bookings is 9 then policy: accept, with value 1593.91
When number of bookings is 10 then policy: accept, with value 1706.92
When number of bookings is 11 then policy: accept, with value 1817.16
When number of bookings is 12 then policy: accept, with value 1923.44
When number of bookings is 13 then policy: accept, with value 2024.39
When number of bookings is 14 then policy: accept, with value 2118.57
When number of bookings is 15 then policy: accept, with value 2204.60
When number of bookings is 16 then policy: accept, with value 2281.25
When number of bookings is 17 then policy: accept, with value 2347.60
When number of bookings is 18 then policy: accept, with value 2403.05
When number of bookings is 19 then policy: accept, with value 2447.27
When number of bookings is 20 then policy: reject, with value 2471.67
When number of bookings is 21 then policy: reject, with value 2497.51
Epochs before flight: 10
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 521.84
When number of bookings is 2 then policy: accept, with value 730.53
When number of bookings is 3 then policy: accept, with value 870.55
When number of bookings is 4 then policy: accept, with value 989.89
When number of bookings is 5 then policy: accept, with value 1101.37
When number of bookings is 6 then policy: accept, with value 1209.37
When number of bookings is 7 then policy: accept, with value 1315.56
When number of bookings is 8 then policy: accept, with value 1420.56
When number of bookings is 9 then policy: accept, with value 1524.43
When number of bookings is 10 then policy: accept, with value 1626.93
When number of bookings is 11 then policy: accept, with value 1727.52
When number of bookings is 12 then policy: accept, with value 1825.48
When number of bookings is 13 then policy: accept, with value 1919.94
When number of bookings is 14 then policy: accept, with value 2009.93
When number of bookings is 15 then policy: accept, with value 2094.44
When number of bookings is 16 then policy: accept, with value 2172.54
When number of bookings is 17 then policy: accept, with value 2243.38
When number of bookings is 18 then policy: accept, with value 2306.26
When number of bookings is 19 then policy: accept, with value 2360.34
When number of bookings is 20 then policy: reject, with value 2392.05
Epochs before flight: 11
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 526.00
When number of bookings is 2 then policy: accept, with value 730.96
When number of bookings is 3 then policy: accept, with value 864.24
When number of bookings is 4 then policy: accept, with value 975.35
When number of bookings is 5 then policy: accept, with value 1077.78
When number of bookings is 6 then policy: accept, with value 1176.22
When number of bookings is 7 then policy: accept, with value 1272.58
When number of bookings is 8 then policy: accept, with value 1367.63
When number of bookings is 9 then policy: accept, with value 1461.63
When number of bookings is 10 then policy: accept, with value 1554.52
When number of bookings is 11 then policy: accept, with value 1646.04
When number of bookings is 12 then policy: accept, with value 1735.78
When number of bookings is 13 then policy: accept, with value 1823.17
When number of bookings is 14 then policy: accept, with value 1907.60
When number of bookings is 15 then policy: accept, with value 1988.39
When number of bookings is 16 then policy: accept, with value 2064.84
When number of bookings is 17 then policy: accept, with value 2136.29
When number of bookings is 18 then policy: accept, with value 2202.11
When number of bookings is 19 then policy: accept, with value 2261.21
Epochs before flight: 12
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 528.74
When number of bookings is 2 then policy: accept, with value 730.21
When number of bookings is 3 then policy: accept, with value 857.53
When number of bookings is 4 then policy: accept, with value 961.40
When number of bookings is 5 then policy: accept, with value 1055.84
When number of bookings is 6 then policy: accept, with value 1145.84
When number of bookings is 7 then policy: accept, with value 1233.47
When number of bookings is 8 then policy: accept, with value 1319.66
When number of bookings is 9 then policy: accept, with value 1404.79
When number of bookings is 10 then policy: accept, with value 1488.97
When number of bookings is 11 then policy: accept, with value 1572.10
When number of bookings is 12 then policy: accept, with value 1653.96
When number of bookings is 13 then policy: accept, with value 1734.23
When number of bookings is 14 then policy: accept, with value 1812.51
When number of bookings is 15 then policy: accept, with value 1888.36
When number of bookings is 16 then policy: accept, with value 1961.29
When number of bookings is 17 then policy: accept, with value 2030.83
When number of bookings is 18 then policy: accept, with value 2096.48
Epochs before flight: 13
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 530.26
When number of bookings is 2 then policy: accept, with value 728.46
When number of bookings is 3 then policy: accept, with value 850.49
When number of bookings is 4 then policy: accept, with value 947.97
When number of bookings is 5 then policy: accept, with value 1035.36
When number of bookings is 6 then policy: accept, with value 1117.89
When number of bookings is 7 then policy: accept, with value 1197.78
When number of bookings is 8 then policy: accept, with value 1276.08
When number of bookings is 9 then policy: accept, with value 1353.28
When number of bookings is 10 then policy: accept, with value 1429.59
When number of bookings is 11 then policy: accept, with value 1505.04
When number of bookings is 12 then policy: accept, with value 1579.53
When number of bookings is 13 then policy: accept, with value 1652.90
When number of bookings is 14 then policy: accept, with value 1724.90
When number of bookings is 15 then policy: accept, with value 1795.27
When number of bookings is 16 then policy: accept, with value 1863.68
When number of bookings is 17 then policy: accept, with value 1929.80
Epochs before flight: 14
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 530.75
When number of bookings is 2 then policy: accept, with value 725.86
When number of bookings is 3 then policy: accept, with value 843.16
When number of bookings is 4 then policy: accept, with value 935.00
When number of bookings is 5 then policy: accept, with value 1016.17
When number of bookings is 6 then policy: accept, with value 1092.09
When number of bookings is 7 then policy: accept, with value 1165.12
When number of bookings is 8 then policy: accept, with value 1236.40
When number of bookings is 9 then policy: accept, with value 1306.52
When number of bookings is 10 then policy: accept, with value 1375.75
When number of bookings is 11 then policy: accept, with value 1444.21
When number of bookings is 12 then policy: accept, with value 1511.91
When number of bookings is 13 then policy: accept, with value 1578.77
When number of bookings is 14 then policy: accept, with value 1644.66
When number of bookings is 15 then policy: accept, with value 1709.43
When number of bookings is 16 then policy: accept, with value 1772.87
Epochs before flight: 15
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 530.35
When number of bookings is 2 then policy: accept, with value 722.52
When number of bookings is 3 then policy: accept, with value 835.59
When number of bookings is 4 then policy: accept, with value 922.44
When number of bookings is 5 then policy: accept, with value 998.11
When number of bookings is 6 then policy: accept, with value 1068.18
When number of bookings is 7 then policy: accept, with value 1135.13
When number of bookings is 8 then policy: accept, with value 1200.19
When number of bookings is 9 then policy: accept, with value 1263.98
When number of bookings is 10 then policy: accept, with value 1326.87
When number of bookings is 11 then policy: accept, with value 1389.03
When number of bookings is 12 then policy: accept, with value 1450.51
When number of bookings is 13 then policy: accept, with value 1511.33
When number of bookings is 14 then policy: accept, with value 1571.44
When number of bookings is 15 then policy: accept, with value 1630.74
Epochs before flight: 16
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 529.20
When number of bookings is 2 then policy: accept, with value 718.56
When number of bookings is 3 then policy: accept, with value 827.83
When number of bookings is 4 then policy: accept, with value 910.24
When number of bookings is 5 then policy: accept, with value 981.04
When number of bookings is 6 then policy: accept, with value 1045.95
When number of bookings is 7 then policy: accept, with value 1107.52
When number of bookings is 8 then policy: accept, with value 1167.04
When number of bookings is 9 then policy: accept, with value 1225.21
When number of bookings is 10 then policy: accept, with value 1282.42
When number of bookings is 11 then policy: accept, with value 1338.90
When number of bookings is 12 then policy: accept, with value 1394.76
When number of bookings is 13 then policy: accept, with value 1450.05
When number of bookings is 14 then policy: accept, with value 1504.76
Epochs before flight: 17
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 527.41
When number of bookings is 2 then policy: accept, with value 714.07
When number of bookings is 3 then policy: accept, with value 819.91
When number of bookings is 4 then policy: accept, with value 898.38
When number of bookings is 5 then policy: accept, with value 964.87
When number of bookings is 6 then policy: accept, with value 1025.20
When number of bookings is 7 then policy: accept, with value 1082.00
When number of bookings is 8 then policy: accept, with value 1136.61
When number of bookings is 9 then policy: accept, with value 1189.78
When number of bookings is 10 then policy: accept, with value 1241.93
When number of bookings is 11 then policy: accept, with value 1293.31
When number of bookings is 12 then policy: accept, with value 1344.10
When number of bookings is 13 then policy: accept, with value 1394.35
Epochs before flight: 18
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 525.07
When number of bookings is 2 then policy: accept, with value 709.13
When number of bookings is 3 then policy: accept, with value 811.86
When number of bookings is 4 then policy: accept, with value 886.81
When number of bookings is 5 then policy: accept, with value 949.48
When number of bookings is 6 then policy: accept, with value 1005.76
When number of bookings is 7 then policy: accept, with value 1058.34
When number of bookings is 8 then policy: accept, with value 1108.60
When number of bookings is 9 then policy: accept, with value 1157.31
When number of bookings is 10 then policy: accept, with value 1204.95
When number of bookings is 11 then policy: accept, with value 1251.79
When number of bookings is 12 then policy: accept, with value 1298.01
Epochs before flight: 19
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 522.26
When number of bookings is 2 then policy: accept, with value 703.81
When number of bookings is 3 then policy: accept, with value 803.71
When number of bookings is 4 then policy: accept, with value 875.52
When number of bookings is 5 then policy: accept, with value 934.79
When number of bookings is 6 then policy: accept, with value 987.48
When number of bookings is 7 then policy: accept, with value 1036.32
When number of bookings is 8 then policy: accept, with value 1082.71
When number of bookings is 9 then policy: accept, with value 1127.48
When number of bookings is 10 then policy: accept, with value 1171.10
When number of bookings is 11 then policy: accept, with value 1213.88
Epochs before flight: 20
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 519.05
When number of bookings is 2 then policy: accept, with value 698.17
When number of bookings is 3 then policy: accept, with value 795.49
When number of bookings is 4 then policy: accept, with value 864.48
When number of bookings is 5 then policy: accept, with value 920.73
When number of bookings is 6 then policy: accept, with value 970.24
When number of bookings is 7 then policy: accept, with value 1015.75
When number of bookings is 8 then policy: accept, with value 1058.73
When number of bookings is 9 then policy: accept, with value 1099.98
When number of bookings is 10 then policy: accept, with value 1140.03
Epochs before flight: 21
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 515.51
When number of bookings is 2 then policy: accept, with value 692.27
When number of bookings is 3 then policy: accept, with value 787.22
When number of bookings is 4 then policy: accept, with value 853.67
When number of bookings is 5 then policy: accept, with value 907.23
When number of bookings is 6 then policy: accept, with value 953.90
When number of bookings is 7 then policy: accept, with value 996.48
When number of bookings is 8 then policy: accept, with value 1036.41
When number of bookings is 9 then policy: accept, with value 1074.56
Epochs before flight: 22
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 511.68
When number of bookings is 2 then policy: accept, with value 686.15
When number of bookings is 3 then policy: accept, with value 778.91
When number of bookings is 4 then policy: accept, with value 843.07
When number of bookings is 5 then policy: accept, with value 894.23
When number of bookings is 6 then policy: accept, with value 938.39
When number of bookings is 7 then policy: accept, with value 978.35
When number of bookings is 8 then policy: accept, with value 1015.59
Epochs before flight: 23
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 507.62
When number of bookings is 2 then policy: accept, with value 679.84
When number of bookings is 3 then policy: accept, with value 770.58
When number of bookings is 4 then policy: accept, with value 832.68
When number of bookings is 5 then policy: accept, with value 881.68
When number of bookings is 6 then policy: accept, with value 923.60
When number of bookings is 7 then policy: accept, with value 961.24
Epochs before flight: 24
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 503.36
When number of bookings is 2 then policy: accept, with value 673.39
When number of bookings is 3 then policy: accept, with value 762.25
When number of bookings is 4 then policy: accept, with value 822.48
When number of bookings is 5 then policy: accept, with value 869.55
When number of bookings is 6 then policy: accept, with value 909.46
Epochs before flight: 25
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 498.93
When number of bookings is 2 then policy: accept, with value 666.83
When number of bookings is 3 then policy: accept, with value 753.93
When number of bookings is 4 then policy: accept, with value 812.45
When number of bookings is 5 then policy: accept, with value 857.78
Epochs before flight: 26
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 494.37
When number of bookings is 2 then policy: accept, with value 660.17
When number of bookings is 3 then policy: accept, with value 745.64
When number of bookings is 4 then policy: accept, with value 802.59
Epochs before flight: 27
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 489.70
When number of bookings is 2 then policy: accept, with value 653.45
When number of bookings is 3 then policy: accept, with value 737.37
Epochs before flight: 28
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 484.94
When number of bookings is 2 then policy: accept, with value 646.67
Epochs before flight: 29
When number of bookings is 0 then policy: accept, with value 0.00
When number of bookings is 1 then policy: accept, with value 480.12
Epochs before flight: 30
When number of bookings is 0 then policy: accept, with value 0.00</code></pre>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>